import{_ as C,c as d,o as i,w as s,a as o,Q,e as u,b as e,I as g,a7 as r,aB as _,as as c,f as v,a8 as y,a9 as O,J as E,d as m,a5 as p,aa as S,t as n}from"./index-CGPPD_8p.js";import{Q as N}from"./QSelect-BmcdxvjH.js";import{Q as V}from"./QForm-Bxg5cRiS.js";import{Q as k,b as f,d as B}from"./format-C6YpUwxM.js";import{Q as w,a as A}from"./QList-DsPQs-wD.js";import{Q as D}from"./QMarkupTable-D2peW2BH.js";import{Q as F}from"./QPage-C7egMHlY.js";import{h}from"./moment-C5S46NFB.js";import"./selection-BAn-ZMzE.js";const I={name:"AcopioPage",data:function(){return{acopioCosechas:[],loading:!1,fechaInicio:h().startOf("month").format("YYYY-MM-DD"),fechaFin:h().endOf("month").format("YYYY-MM-DD"),estados:[{label:"BUENO",value:"BUENO"},{label:"EN PROCESO",value:"EN_PROCESO"},{label:"CANCELADO",value:"CANCELADO"}],estadoSeleccionado:null}},mounted(){this.buscarCosechas()},methods:{buscarCosechas(){this.loading=!0,this.$axios.get("/acopio/cosechas",{params:{fecha_inicio:this.fechaInicio,fecha_fin:this.fechaFin,estado:this.estadoSeleccionado}}).then(t=>{this.acopioCosechas=t.data}).finally(()=>{this.loading=!1})}}},x={class:"row q-gutter-sm"},Y={class:"col-12 col-md-2"},M={class:"col-12 col-md-2"},P={class:"col-12 col-md-3"},U={class:"col-12 col-md-3 flex flex-center"},$={key:1,class:"text-center q-pa-md"};function j(t,l,L,R,q,b){return i(),d(F,{class:"q-pa-xs"},{default:s(()=>[o(Q,null,{default:s(()=>[o(u,null,{default:s(()=>l[3]||(l[3]=[e("div",{class:"text-h6"},"Acopio de Cosechas",-1)])),_:1}),o(g),o(u,null,{default:s(()=>[o(V,{onSubmit:_(b.buscarCosechas,["prevent"])},{default:s(()=>[e("div",x,[e("div",Y,[o(c,{modelValue:t.fechaInicio,"onUpdate:modelValue":l[0]||(l[0]=a=>t.fechaInicio=a),label:"Fecha Inicio",type:"date",dense:"",outlined:""},null,8,["modelValue"])]),e("div",M,[o(c,{modelValue:t.fechaFin,"onUpdate:modelValue":l[1]||(l[1]=a=>t.fechaFin=a),label:"Fecha Fin",type:"date",dense:"",outlined:""},null,8,["modelValue"])]),e("div",P,[o(N,{modelValue:t.estadoSeleccionado,"onUpdate:modelValue":l[2]||(l[2]=a=>t.estadoSeleccionado=a),options:t.estados,label:"Estado de Cosecha",dense:"",outlined:"",clearable:""},null,8,["modelValue","options"])]),e("div",U,[o(v,{loading:t.loading,label:"Buscar Cosechas",type:"submit",color:"primary",class:"full-width","no-caps":"",icon:"search"},null,8,["loading"])])])]),_:1},8,["onSubmit"]),t.acopioCosechas.length>0?(i(),d(D,{key:0,dense:"","wrap-cells":"",flat:"",bordered:""},{default:s(()=>[l[5]||(l[5]=e("thead",null,[e("tr",{class:"bg-primary text-white"},[e("th",null,"Opciones"),e("th",null,"Fecha Cosecha"),e("th",null,"Productor"),e("th",null,"Cantidad (kg)"),e("th",null,"Humedad (%)"),e("th",null,"Temperatura Almacenaje (°C)"),e("th",null,"Número Acta"),e("th",null,"Condiciones Almacenaje"),e("th",null,"Estado")])],-1)),e("tbody",null,[(i(!0),r(y,null,O(t.acopioCosechas,a=>(i(),r("tr",{key:a.id},[e("td",null,[o(w,{dense:"",label:"Opciones",color:"primary","no-caps":"",size:"10px"},{default:s(()=>[o(A,null,{default:s(()=>[E((i(),d(k,{clickable:"",to:`/acopio/cosechas/${a.id}`},{default:s(()=>[o(f,{avatar:""},{default:s(()=>[o(m,{name:"visibility"})]),_:1}),o(f,null,{default:s(()=>l[4]||(l[4]=[p("Ver Detalles")])),_:1})]),_:2},1032,["to"])),[[S]])]),_:2},1024)]),_:2},1024)]),e("td",null,n(a.fecha_cosecha),1),e("td",null,n(a.apiario?.productor.nombre)+" "+n(a.apiario?.productor.apellidos),1),e("td",null,n(a.cantidad_kg),1),e("td",null,n(a.humedad),1),e("td",null,n(a.temperatura_almacenaje),1),e("td",null,n(a.num_acta),1),e("td",null,n(a.condiciones_almacenaje),1),e("td",null,[o(B,{color:a.estado==="BUENO"?"green":a.estado==="EN_PROCESO"?"orange":"red","text-color":"white",dense:"",size:"10px"},{default:s(()=>[p(n(a.estado.replace("_"," ")),1)]),_:2},1032,["color"])])]))),128))])]),_:1})):(i(),r("div",$,[o(m,{name:"info",size:"48px",color:"grey-5"}),l[6]||(l[6]=e("div",{class:"text-subtitle2 text-grey-5"},"No se encontraron cosechas.",-1))]))]),_:1})]),_:1})]),_:1})}const ee=C(I,[["render",j]]);export{ee as default};
