import{Q as y}from"./QSelect-Db_8UKnU.js";import{_ as b,a9 as x,o as _,a as e,ae as z,b as s,w as a,e as n,d as c,O as d,t as r,a7 as h,Q as p,af as q,f,i as w,a6 as Q,c as P}from"./index-CAulUK1l.js";import{Q as k}from"./QPage-CV8wXvdH.js";import{Q as C}from"./QLinearProgress-Knx0hMuG.js";import{Q as D}from"./QBadge-CRQLzB3T.js";import"./QChip-BiqMtwu8.js";import"./position-engine-CzBd1S9u.js";import"./selection-18ztxYWA.js";import"./format-B-I0JNio.js";const V={name:"DashboardTrazabilidadResumen",props:{gestion:{type:Number,required:!0}},data(){return{loading:!1,capacidad:null,senasag:null,recepcion:null,procesamiento:null,lotes:null}},mounted(){this.cargarDatos()},methods:{formatNumber(i){return Number(i||0).toLocaleString("es-BO",{minimumFractionDigits:0,maximumFractionDigits:0})},async cargarDatos(){this.loading=!0;try{const i=[this.$axios.get("/dashboard-trazabilidad/capacidad-productiva",{params:{gestion:this.gestion}}).catch(l=>(console.error("Error capacidad:",l),{data:{resumen:null}})),this.$axios.get("/dashboard-trazabilidad/senasag",{params:{gestion:this.gestion}}).catch(l=>(console.error("Error senasag:",l),{data:null})),this.$axios.get("/dashboard-trazabilidad/recepcion-rechazos",{params:{gestion:this.gestion}}).catch(l=>(console.error("Error recepcion:",l),{data:{resumen:null}})),this.$axios.get("/dashboard-trazabilidad/procesamiento-merma",{params:{gestion:this.gestion}}).catch(l=>(console.error("Error procesamiento:",l),{data:{resumen:null}})),this.$axios.get("/dashboard-trazabilidad/lotes-almacenamiento",{params:{gestion:this.gestion}}).catch(l=>(console.error("Error lotes:",l),{data:{resumen:null}}))],[t,u,g,o,m]=await Promise.all(i);this.capacidad=t.data.resumen,this.senasag=u.data,this.recepcion=g.data.resumen,this.procesamiento=o.data.resumen,this.lotes=m.data.resumen}catch(i){console.error("Error general:",i)}finally{this.loading=!1}}},watch:{gestion(){this.cargarDatos()}}},E={key:0,class:"text-center q-pa-md"},N={key:1,class:"row q-col-gutter-md"},R={class:"col-12 col-md-4"},T={class:"row items-center"},B={class:"q-gutter-sm"},S={class:"row items-center"},I={class:"col"},A={class:"text-h6"},F={class:"col"},G={class:"text-h6"},L={class:"row items-center"},O={class:"col"},$={class:"text-body2"},M={class:"col"},U={class:"text-body2 text-positive"},Y={class:"row items-center q-mt-xs"},j={class:"col"},H={class:"col-auto q-ml-sm"},J={class:"text-center"},K={class:"text-caption text-grey-7 q-ml-xs"},W={class:"col-12 col-md-4"},X={class:"row items-center"},Z={class:"q-gutter-sm"},ss={class:"row items-center"},ts={class:"col"},es={class:"text-h6"},os={class:"col"},as={class:"text-h6 text-positive"},is={class:"row items-center"},rs={class:"col"},ls={class:"text-body2"},ds={class:"col"},ns={class:"row items-center"},cs={class:"col"},ms={class:"text-body2"},ps={class:"col"},us={class:"text-body2 text-info"},gs={class:"text-center"},_s={class:"text-caption text-grey-7 q-ml-xs"},vs={class:"col-12 col-md-4"},xs={class:"row items-center"},hs={class:"q-gutter-sm text-center q-pa-md"},bs={class:"q-mt-md q-pt-md",style:{"border-top":"1px dashed #ccc"}},fs={class:"text-caption text-grey-6"};function ys(i,t,u,g,o,m){return o.loading?(_(),x("div",E,[e(z,{color:"primary",size:"3em"})])):(_(),x("div",N,[s("div",R,[e(p,{flat:"",bordered:"",class:"full-height"},{default:a(()=>[e(n,{class:"bg-green-1"},{default:a(()=>[s("div",T,[e(c,{name:"agriculture",size:"md",color:"positive",class:"q-mr-sm"}),t[1]||(t[1]=s("div",null,[s("div",{class:"text-subtitle1 text-weight-bold"},"Trazabilidad Atrás"),s("div",{class:"text-caption text-grey-7"},"Producción Primaria")],-1))])]),_:1}),e(d),e(n,null,{default:a(()=>[s("div",B,[s("div",S,[s("div",I,[t[2]||(t[2]=s("div",{class:"text-caption text-grey-7"},"Productores Activos",-1)),s("div",A,r(o.capacidad?.total_productores||0),1)]),s("div",F,[t[3]||(t[3]=s("div",{class:"text-caption text-grey-7"},"Colmenas",-1)),s("div",G,r(o.capacidad?.total_colmenas||0),1)])]),e(d),s("div",L,[s("div",O,[t[4]||(t[4]=s("div",{class:"text-caption text-grey-7"},"Capacidad Teórica",-1)),s("div",$,r(m.formatNumber(o.capacidad?.capacidad_teorica))+" kg",1)]),s("div",M,[t[5]||(t[5]=s("div",{class:"text-caption text-grey-7"},"Producción Real",-1)),s("div",U,r(m.formatNumber(o.capacidad?.produccion_real))+" kg",1)])]),e(d),s("div",null,[t[6]||(t[6]=s("div",{class:"text-caption text-grey-7"},"Eficiencia Productiva",-1)),s("div",Y,[s("div",j,[e(C,{value:(o.capacidad?.eficiencia||0)/100,color:"positive",size:"20px"},null,8,["value"])]),s("div",H,[e(D,{color:"positive"},{default:a(()=>[h(r(o.capacidad?.eficiencia||0)+"%",1)]),_:1})])])]),e(d),s("div",J,[e(c,{name:"bug_report",size:"sm",color:"orange"}),s("span",K,r(o.senasag?.plagas?.total_registros||0)+" registros de plagas ",1)])])]),_:1})]),_:1})]),s("div",W,[e(p,{flat:"",bordered:"",class:"full-height"},{default:a(()=>[e(n,{class:"bg-blue-1"},{default:a(()=>[s("div",X,[e(c,{name:"factory",size:"md",color:"primary",class:"q-mr-sm"}),t[7]||(t[7]=s("div",null,[s("div",{class:"text-subtitle1 text-weight-bold"},"Trazabilidad En Proceso"),s("div",{class:"text-caption text-grey-7"},"Procesamiento")],-1))])]),_:1}),e(d),e(n,null,{default:a(()=>[s("div",Z,[s("div",ss,[s("div",ts,[t[8]||(t[8]=s("div",{class:"text-caption text-grey-7"},"Acopios Totales",-1)),s("div",es,r(o.recepcion?.total_acopios||0),1)]),s("div",os,[t[9]||(t[9]=s("div",{class:"text-caption text-grey-7"},"Validados",-1)),s("div",as,r(o.recepcion?.acopios_validados||0),1)])]),e(d),s("div",is,[s("div",rs,[t[10]||(t[10]=s("div",{class:"text-caption text-grey-7"},"Procesos Finalizados",-1)),s("div",ls,r(o.procesamiento?.procesos_finalizados||0),1)]),s("div",ds,[t[11]||(t[11]=s("div",{class:"text-caption text-grey-7"},"Merma Promedio",-1)),s("div",{class:q(["text-body2",o.procesamiento?.merma_promedio>5?"text-warning":"text-positive"])},r(o.procesamiento?.merma_promedio||0)+"% ",3)])]),e(d),s("div",ns,[s("div",cs,[t[12]||(t[12]=s("div",{class:"text-caption text-grey-7"},"Lotes Generados",-1)),s("div",ms,r(o.lotes?.lotes_generados||0),1)]),s("div",ps,[t[13]||(t[13]=s("div",{class:"text-caption text-grey-7"},"Stock Actual",-1)),s("div",us,r(m.formatNumber(o.lotes?.stock_actual))+" kg",1)])]),e(d),s("div",gs,[e(c,{name:o.lotes?.tanques_criticos>0?"warning":"check_circle",size:"sm",color:o.lotes?.tanques_criticos>0?"warning":"positive"},null,8,["name","color"]),s("span",_s,r(o.lotes?.tanques_criticos||0)+" tanques críticos ",1)])])]),_:1})]),_:1})]),s("div",vs,[e(p,{flat:"",bordered:"",class:"full-height"},{default:a(()=>[e(n,{class:"bg-orange-1"},{default:a(()=>[s("div",xs,[e(c,{name:"local_shipping",size:"md",color:"orange",class:"q-mr-sm"}),t[14]||(t[14]=s("div",null,[s("div",{class:"text-subtitle1 text-weight-bold"},"Trazabilidad Adelante"),s("div",{class:"text-caption text-grey-7"},"Comercialización")],-1))])]),_:1}),e(d),e(n,null,{default:a(()=>[s("div",hs,[e(c,{name:"info",size:"lg",color:"info"}),t[16]||(t[16]=s("div",{class:"text-body2 text-grey-7 q-mt-md"}," La trazabilidad hacia adelante se visualiza en el módulo de ventas. ",-1)),t[17]||(t[17]=s("div",{class:"text-caption text-grey-6 q-mt-sm"}," Incluye registro de ventas, destinos y seguimiento de lotes comercializados. ",-1)),e(f,{label:"Ver Ventas",icon:"point_of_sale",color:"orange",outline:"","no-caps":"",size:"sm",class:"q-mt-md",onClick:t[0]||(t[0]=l=>i.$router.push("/ventas/dashboard"))}),s("div",bs,[s("div",fs,[e(c,{name:"search",size:"xs"}),t[15]||(t[15]=h(" Búsqueda de lotes por código QR disponible en el dashboard completo "))])])])]),_:1})]),_:1})])]))}const zs=b(V,[["render",ys]]),qs=w({name:"IndexPage",components:{DashboardTrazabilidadResumen:zs},data(){return{gestion:new Date().getFullYear(),opcionesGestion:[2023,2024,2025,2026,2027]}}}),ws={class:"row q-col-gutter-md"},Qs={class:"col-12"},Ps={class:"row items-center"},ks={class:"col-auto"};function Cs(i,t,u,g,o,m){const l=Q("dashboard-trazabilidad-resumen");return _(),P(k,{class:"q-pa-md bg-grey-2"},{default:a(()=>[s("div",ws,[s("div",Qs,[e(p,{flat:"",bordered:""},{default:a(()=>[e(n,null,{default:a(()=>[s("div",Ps,[t[2]||(t[2]=s("div",{class:"col"},[s("div",{class:"text-h6 text-primary"},"Dashboard de Trazabilidad Integral"),s("div",{class:"text-caption text-grey-7"}," Sistema completo de seguimiento de producción apícola ")],-1)),s("div",ks,[e(y,{modelValue:i.gestion,"onUpdate:modelValue":t[0]||(t[0]=v=>i.gestion=v),options:i.opcionesGestion,label:"Gestión",dense:"",outlined:"",style:{"min-width":"120px"},class:"q-mr-md"},null,8,["modelValue","options"]),e(f,{label:"Ver Dashboard Completo",icon:"analytics",color:"primary",outline:"","no-caps":"",onClick:t[1]||(t[1]=v=>i.$router.push("/dashboard-trazabilidad"))})])])]),_:1}),e(d),e(n,null,{default:a(()=>[e(l,{gestion:parseInt(i.gestion)},null,8,["gestion"])]),_:1})]),_:1})])])]),_:1})}const As=b(qs,[["render",Cs],["__scopeId","data-v-3d8d38f4"]]);export{As as default};
