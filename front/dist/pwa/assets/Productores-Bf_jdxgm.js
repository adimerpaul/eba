import{as as ue,v as $,g as ee,at as ce,x as d,j as y,au as me,av as fe,G as ge,J as pe,r as he,p as ve,aw as H,ax as be,ay as _e,af as F,f as B,_ as ye,c as xe,o as c,w as b,b as o,a as r,ae as ke,Q as L,e as X,ai as Ce,d as E,aa as m,a9 as p,ag as Ve,ab as U,a8 as j,t as h,ac as G,az as ze}from"./index-DtQNNEk7.js";import{Q as Se}from"./QSpace-CSNDOO_y.js";import{Q as V}from"./QSelect-DVsrntpt.js";import{c as te,d as Y}from"./format-dinfl-bz.js";import{Q as Pe}from"./QMarkupTable-CqvEziNT.js";import{Q as Ae}from"./QPage-BNn5-0e_.js";import{h as Z}from"./moment-C5S46NFB.js";import"./selection-x0e6Y0OP.js";const Te={...ue,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},R=50,ae=2*R,ie=ae*Math.PI,Ne=Math.round(ie*1e3)/1e3,we=$({name:"QCircularProgress",props:{...Te,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:i}){const{proxy:{$q:u}}=ee(),f=ce(e),t=d(()=>{const g=(u.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(u.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-g}deg)`:`rotate3d(0, 0, 1, ${g-90}deg)`}}),l=d(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),a=d(()=>ae/(1-e.thickness/2)),_=d(()=>`${a.value/2} ${a.value/2} ${a.value} ${a.value}`),z=d(()=>te(e.value,e.min,e.max)),D=d(()=>e.max-e.min),x=d(()=>e.thickness/2*a.value),M=d(()=>{const g=(e.max-z.value)/D.value,v=e.rounded===!0&&z.value<e.max&&g<.25?x.value/2*(1-g/.25):0;return ie*g+v});function P({thickness:g,offset:v,color:O,cls:A,rounded:Q}){return y("circle",{class:"q-circular-progress__"+A+(O!==void 0?` text-${O}`:""),style:l.value,fill:"transparent",stroke:"currentColor","stroke-width":g,"stroke-dasharray":Ne,"stroke-dashoffset":v,"stroke-linecap":Q,cx:a.value,cy:a.value,r:R})}return()=>{const g=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&g.push(y("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:R-x.value/2,cx:a.value,cy:a.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&g.push(P({cls:"track",thickness:x.value,offset:0,color:e.trackColor})),g.push(P({cls:"circle",thickness:x.value,offset:M.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const v=[y("svg",{class:"q-circular-progress__svg",style:t.value,viewBox:_.value,"aria-hidden":"true"},g)];return e.showValue===!0&&v.push(y("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},i.default!==void 0?i.default():[y("div",z.value)])),y("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:f.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:z.value},me(i.internal,v))}}});function I(e,i){return[!0,!1].includes(e)?e:i}const Be=$({name:"QPagination",props:{...ge,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||fe.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:i}){const{proxy:u}=ee(),{$q:f}=u,t=pe(e,f),l=d(()=>parseInt(e.min,10)),a=d(()=>parseInt(e.max,10)),_=d(()=>parseInt(e.maxPages,10)),z=d(()=>v.value+" / "+a.value),D=d(()=>I(e.boundaryLinks,e.input)),x=d(()=>I(e.boundaryNumbers,!e.input)),M=d(()=>I(e.directionLinks,e.input)),P=d(()=>I(e.ellipses,!e.input)),g=he(null),v=d({get:()=>e.modelValue,set:s=>{if(s=parseInt(s,10),e.disable||isNaN(s))return;const n=te(s,l.value,a.value);e.modelValue!==n&&i("update:modelValue",n)}});ve(()=>`${l.value}|${a.value}`,()=>{v.value=e.modelValue});const O=d(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),A=d(()=>e.gutter in H?`${H[e.gutter]}px`:e.gutter||null),Q=d(()=>A.value!==null?`--q-pagination-gutter-parent:-${A.value};--q-pagination-gutter-child:${A.value}`:null),q=d(()=>{const s=[e.iconFirst||f.iconSet.pagination.first,e.iconPrev||f.iconSet.pagination.prev,e.iconNext||f.iconSet.pagination.next,e.iconLast||f.iconSet.pagination.last];return f.lang.rtl===!0?s.reverse():s}),le=d(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),K=d(()=>be(e,"flat")),oe=d(()=>({[K.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),se=d(()=>{const s={[K.value]:!1};return e.activeDesign!==""&&(s[e.activeDesign]=!0),s}),ne=d(()=>({...se.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),T=d(()=>{let s=Math.max(_.value,1+(P.value?2:0)+(x.value?2:0));const n={pgFrom:l.value,pgTo:a.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(a.value).length)}em`}};return _.value&&s<a.value-l.value+1&&(s=1+Math.floor(s/2)*2,n.pgFrom=Math.max(l.value,Math.min(a.value-s+1,e.modelValue-Math.floor(s/2))),n.pgTo=Math.min(a.value,n.pgFrom+s-1),x.value&&(n.boundaryStart=!0,n.pgFrom++),P.value&&n.pgFrom>l.value+(x.value?1:0)&&(n.ellipsesStart=!0,n.pgFrom++),x.value&&(n.boundaryEnd=!0,n.pgTo--),P.value&&n.pgTo<a.value-(x.value?1:0)&&(n.ellipsesEnd=!0,n.pgTo--)),n});function J(s){v.value=s}function re(s){v.value=v.value+s}const de=d(()=>{function s(){v.value=g.value,g.value=null}return{"onUpdate:modelValue":n=>{g.value=n},onKeyup:n=>{_e(n,13)===!0&&s()},onBlur:s}});function C(s,n,N){const S={"aria-label":n,"aria-current":"false",...oe.value,...s};return N===!0&&Object.assign(S,{"aria-current":"true",...ne.value}),n!==void 0&&(e.toFn!==void 0?S.to=e.toFn(n):S.onClick=()=>{J(n)}),y(B,S)}return Object.assign(u,{set:J,setByOffset:re}),()=>{const s=[],n=[];let N;if(D.value===!0&&(s.push(C({key:"bls",disable:e.disable||e.modelValue<=l.value,icon:q.value[0],"aria-label":f.lang.pagination.first},l.value)),n.unshift(C({key:"ble",disable:e.disable||e.modelValue>=a.value,icon:q.value[3],"aria-label":f.lang.pagination.last},a.value))),M.value===!0&&(s.push(C({key:"bdp",disable:e.disable||e.modelValue<=l.value,icon:q.value[1],"aria-label":f.lang.pagination.prev},e.modelValue-1)),n.unshift(C({key:"bdn",disable:e.disable||e.modelValue>=a.value,icon:q.value[2],"aria-label":f.lang.pagination.next},e.modelValue+1))),e.input!==!0){N=[];const{pgFrom:S,pgTo:W,marginalStyle:w}=T.value;if(T.value.boundaryStart===!0){const k=l.value===e.modelValue;s.push(C({key:"bns",style:w,disable:e.disable,label:l.value},l.value,k))}if(T.value.boundaryEnd===!0){const k=a.value===e.modelValue;n.unshift(C({key:"bne",style:w,disable:e.disable,label:a.value},a.value,k))}T.value.ellipsesStart===!0&&s.push(C({key:"bes",style:w,disable:e.disable,label:"…",ripple:!1},S-1)),T.value.ellipsesEnd===!0&&n.unshift(C({key:"bee",style:w,disable:e.disable,label:"…",ripple:!1},W+1));for(let k=S;k<=W;k++)N.push(C({key:`bpg${k}`,style:w,disable:e.disable,label:k},k,k===e.modelValue))}return y("div",{class:O.value,...le.value},[y("div",{class:"q-pagination__content row no-wrap items-center",style:Q.value},[...s,e.input===!0?y(F,{class:"inline",style:{width:`${z.value.length/1.5}em`},type:"number",dense:!0,value:g.value,disable:e.disable,dark:t.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:z.value,min:l.value,max:a.value,...de.value}):y("div",{class:"q-pagination__middle row justify-center"},N),...n])])}}}),Oe={name:"ProductoresPage",data(){return{rows:[],loading:!1,producto:{},serverCount:0,pagination:{page:1,perPage:10},loadingTree:!1,tree:[],filters:{search:"",estado:null,sexo:null,fecha_desde:null,fecha_hasta:null,departamento_id:null,provincia_id:null,municipio_id:null},sexoOptions:[{label:"Masculino",value:1},{label:"Femenino",value:2}],trazabilidadActiva:!1,trazabilidad:{gestion:Z().year(),producto_id:1},gestionesOptions:[],productosOptions:[],loadingTrazabilidad:!1,mesesTemporada:[{offset:0,nombre:"Jul"},{offset:1,nombre:"Ago"},{offset:2,nombre:"Sep"},{offset:3,nombre:"Oct"},{offset:4,nombre:"Nov"},{offset:5,nombre:"Dic"},{offset:6,nombre:"Ene"},{offset:7,nombre:"Feb"},{offset:8,nombre:"Mar"},{offset:9,nombre:"Abr"},{offset:10,nombre:"May"},{offset:11,nombre:"Jun"}]}},computed:{pageCount(){return Math.max(1,Math.ceil(this.serverCount/this.pagination.perPage))},depOptions(){return Array.isArray(this.tree)?this.tree.map(e=>({label:e.nombre_departamento,value:e.id})):[]},provOptions(){const e=this.filters.departamento_id;return e?((this.tree||[]).find(u=>u.id===e)?.provincias||[]).map(u=>({label:u.nombre_provincia,value:u.id})):[]},munOptions(){const e=this.filters.departamento_id,i=this.filters.provincia_id;return!e||!i?[]:(((this.tree||[]).find(t=>t.id===e)?.provincias||[]).find(t=>t.id===i)?.municipios||[]).map(t=>({label:t.nombre_municipio,value:t.id}))}},mounted(){this.loadTree(),this.generarGestiones(),this.cargarProductos(),this.fetchPage()},methods:{async genrarExcel(){this.loading=!0;const e={page:this.pagination.page,per_page:this.pagination.perPage,sort_by:"id",sort_dir:"desc",search:this.filters.search||void 0,estado:this.filters.estado||void 0,sexo:this.filters.sexo||void 0,fecha_desde:this.filters.fecha_desde||void 0,fecha_hasta:this.filters.fecha_hasta||void 0,departamento_id:this.filters.departamento_id||void 0,provincia_id:this.filters.provincia_id||void 0,municipio_id:this.filters.municipio_id||void 0};this.trazabilidadActiva&&(e.incluir_trazabilidad=!0,e.gestion=this.trazabilidad.gestion,e.producto_id=this.trazabilidad.producto_id),await this.$axios.post("productorExcel",e,{responseType:"blob"}).then(i=>{const u=new Blob([i.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),f=window.URL.createObjectURL(u),t=document.createElement("a");t.href=f;const l=this.trazabilidadActiva?"proveedores_trazabilidad.xlsx":"proveedores.xlsx";t.setAttribute("download",l),document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(f)}).catch(i=>{this.$alert?.error?.(i.response?.data?.message||"No se pudo generar el reporte.")}).finally(()=>{this.loading=!1})},chipColor(e){return e==="VIGENTE"||e==="ACTIVO"?"green":e==="VENCIDO"||e==="INACTIVO"?"red":"grey"},async loadTree(){this.loadingTree=!0;try{const{data:e}=await this.$axios.get("geo/tree");this.tree=e}catch(e){this.$alert?.error?.(e.response?.data?.message||"No se pudo cargar el árbol geográfico")}finally{this.loadingTree=!1}},async fetchPage(){this.loading=!0,this.rows=[];try{const{data:e}=await this.$axios.get("productores",{params:{page:this.pagination.page,per_page:this.pagination.perPage,sort_by:"id",sort_dir:"desc",search:this.filters.search||void 0,estado:this.filters.estado||void 0,sexo:this.filters.sexo||void 0,fecha_desde:this.filters.fecha_desde||void 0,fecha_hasta:this.filters.fecha_hasta||void 0,departamento_id:this.filters.departamento_id||void 0,provincia_id:this.filters.provincia_id||void 0,municipio_id:this.filters.municipio_id||void 0}});this.rows=e.data,this.serverCount=e.total,this.trazabilidadActiva&&await this.cargarTrazabilidad(),this.pagination.page>this.pageCount&&(this.pagination.page=this.pageCount)}catch(e){this.$alert?.error?.(e.response?.data?.message||"No se pudo cargar productores")}finally{this.loading=!1}},changePage(){this.fetchPage()},changePerPage(){this.pagination.page=1,this.fetchPage()},applyFilters(){this.pagination.page=1,this.fetchPage()},onDepChange(){this.filters.provincia_id=null,this.filters.municipio_id=null,this.applyFilters()},onProvChange(){this.filters.municipio_id=null,this.applyFilters()},openDetails(e){this.$router.push("/productores/editar/"+e.id)},generarGestiones(){const e=Z().year(),i=[];for(let u=e;u>=2020;u--)i.push(u);this.gestionesOptions=i},async cargarProductos(){try{const{data:e}=await this.$axios.get("/productos/tipo/1");this.productosOptions=e?.data||e||[]}catch{this.$alert?.error?.("No se pudieron cargar los productos")}},async toggleTrazabilidad(e){e?await this.cargarTrazabilidad():this.limpiarAcopiosMensuales()},async cargarTrazabilidad(){if(!(!this.trazabilidadActiva||this.rows.length===0)){this.loadingTrazabilidad=!0;try{const e=this.rows.map(u=>u.id),{data:i}=await this.$axios.post("/productores/acopios-gestion-lote",{productor_ids:e,gestion:this.trazabilidad.gestion,producto_id:this.trazabilidad.producto_id});this.rows.forEach(u=>{const f=i.find(t=>t.productor_id===u.id);f?(u.acopios_meses=f.meses_array,u.total_acopios=f.total_kg):(u.acopios_meses={},u.total_acopios=0)})}catch{this.$alert?.error?.("Error al cargar datos de trazabilidad")}finally{this.loadingTrazabilidad=!1}}},limpiarAcopiosMensuales(){this.rows.forEach(e=>{e.acopios_meses={},e.total_acopios=0})},formatNumber(e){const i=Number(e);return isNaN(i)?"0.00":i.toFixed(2)},colorPorCantidad(e){const i=Number(e);return i>30?"cantidad-alta":i>=10?"cantidad-media":"cantidad-baja"},mesConAnio(e){const i=e.offset<=5?this.trazabilidad.gestion:this.trazabilidad.gestion+1;return`${e.nombre} ${i.toString().slice(-2)}`}}},qe={class:"row items-center q-gutter-sm q-mb-sm"},Ee={class:"col-12 col-md-3"},Ue={class:"col-12 col-md-2"},Ie={class:"col-12 col-md-2"},Fe={class:"col-12 col-md-2"},De={class:"col-12 col-md-2"},Me={class:"col-12 col-md-3"},Qe={class:"col-12 col-md-3"},Le={class:"col-12 col-md-3"},je={class:"col-12 col-md-auto q-gutter-sm"},Ge={class:"col-auto"},Re={class:"col-auto"},Ke={class:"col-auto"},Je={class:"col-auto"},We={class:"bg-primary text-white"},He={key:0,class:"text-left"},Xe={key:1,class:"text-left"},Ye={key:2,class:"text-left"},Ze={key:3,class:"text-left"},$e={key:4,class:"text-left"},et={class:"text-caption"},tt={class:"text-caption text-weight-light"},at={key:6,class:"text-right bg-blue-10 total-column"},it=["onClick"],lt={class:"text-left"},ot={class:"text-left"},st={key:0,class:"text-left"},nt={class:"text-left"},rt={class:"text-weight-medium"},dt={class:"text-caption text-grey-7"},ut={key:1,class:"text-left"},ct={key:2,class:"text-left"},mt={key:3,class:"text-left"},ft={class:"text-left"},gt={key:4,class:"text-left"},pt={key:0,class:"text-weight-medium"},ht={key:1,class:"text-grey-5"},vt={key:6,class:"text-right text-weight-bold text-primary total-column"},bt={key:0},_t=["colspan"],yt={key:0,class:"absolute-full flex flex-center bg-transparent"},xt={class:"q-pa-sm row items-center justify-between"},kt={class:"text-caption"},Ct={class:"row items-center q-gutter-sm"};function Vt(e,i,u,f,t,l){return c(),xe(Ae,{class:"q-pa-md"},{default:b(()=>[o("div",qe,[r(ke,{icon:"person_search",color:"primary","text-color":"white"}),i[14]||(i[14]=o("div",{class:"text-h6 text-weight-bold"},"Productores",-1)),r(Se),r(B,{color:"primary",icon:"forest",label:"Actualizar árbol geo",onClick:l.loadTree,loading:t.loadingTree,"no-caps":""},null,8,["onClick","loading"])]),r(L,{flat:"",bordered:"",class:"q-mb-md"},{default:b(()=>[r(X,{class:"row q-col-gutter-sm"},{default:b(()=>[o("div",Ee,[r(F,{modelValue:t.filters.search,"onUpdate:modelValue":i[0]||(i[0]=a=>t.filters.search=a),dense:"",outlined:"",placeholder:"Buscar (RUNSA, nombre, carnet, celular...)",onKeyup:Ce(l.applyFilters,["enter"])},{append:b(()=>[r(E,{name:"search"})]),_:1},8,["modelValue","onKeyup"])]),o("div",Ue,[r(V,{modelValue:t.filters.estado,"onUpdate:modelValue":i[1]||(i[1]=a=>t.filters.estado=a),options:["VIGENTE","VENCIDO","ACTIVO","INACTIVO"],dense:"",outlined:"",label:"Estado",clearable:""},null,8,["modelValue"])]),o("div",Ie,[r(V,{modelValue:t.filters.sexo,"onUpdate:modelValue":i[2]||(i[2]=a=>t.filters.sexo=a),options:t.sexoOptions,dense:"",outlined:"",label:"Sexo",clearable:""},null,8,["modelValue","options"])]),o("div",Fe,[r(F,{modelValue:t.filters.fecha_desde,"onUpdate:modelValue":i[3]||(i[3]=a=>t.filters.fecha_desde=a),type:"date",dense:"",outlined:"",label:"Desde"},null,8,["modelValue"])]),o("div",De,[r(F,{modelValue:t.filters.fecha_hasta,"onUpdate:modelValue":i[4]||(i[4]=a=>t.filters.fecha_hasta=a),type:"date",dense:"",outlined:"",label:"Hasta"},null,8,["modelValue"])]),o("div",Me,[r(V,{modelValue:t.filters.departamento_id,"onUpdate:modelValue":[i[5]||(i[5]=a=>t.filters.departamento_id=a),l.onDepChange],options:l.depOptions,"option-label":"label","option-value":"value","emit-value":"","map-options":"",dense:"",outlined:"",label:"Departamento"},null,8,["modelValue","options","onUpdate:modelValue"])]),o("div",Qe,[r(V,{modelValue:t.filters.provincia_id,"onUpdate:modelValue":[i[6]||(i[6]=a=>t.filters.provincia_id=a),l.onProvChange],options:l.provOptions,"option-label":"label","option-value":"value","emit-value":"","map-options":"",dense:"",outlined:"",label:"Provincia",disable:!t.filters.departamento_id},null,8,["modelValue","options","disable","onUpdate:modelValue"])]),o("div",Le,[r(V,{modelValue:t.filters.municipio_id,"onUpdate:modelValue":i[7]||(i[7]=a=>t.filters.municipio_id=a),options:l.munOptions,"option-label":"label","option-value":"value","emit-value":"","map-options":"",dense:"",outlined:"",label:"Municipio",disable:!t.filters.provincia_id},null,8,["modelValue","options","disable"])]),o("div",je,[r(B,{color:"secondary",icon:"refresh",label:"Aplicar",loading:t.loading,onClick:l.applyFilters,"no-caps":""},null,8,["loading","onClick"]),r(B,{color:"primary",icon:"person_add",label:"Nuevo Productor",loading:t.loading,onClick:i[8]||(i[8]=a=>e.$router.push("/productores/crear")),"no-caps":""},null,8,["loading"]),r(B,{color:"green",label:"EXCEL",onClick:l.genrarExcel,loading:t.loading},null,8,["onClick","loading"])])]),_:1})]),_:1}),r(L,{flat:"",bordered:"",class:"q-mb-md"},{default:b(()=>[r(X,{class:"row q-col-gutter-md items-center bg-blue-1"},{default:b(()=>[o("div",Ge,[r(Ve,{modelValue:t.trazabilidadActiva,"onUpdate:modelValue":[i[9]||(i[9]=a=>t.trazabilidadActiva=a),l.toggleTrazabilidad],label:"Ver Trazabilidad por Temporada",color:"primary",icon:"analytics"},null,8,["modelValue","onUpdate:modelValue"])]),t.trazabilidadActiva?(c(),m(U,{key:0},[o("div",Re,[r(V,{modelValue:t.trazabilidad.gestion,"onUpdate:modelValue":[i[10]||(i[10]=a=>t.trazabilidad.gestion=a),l.cargarTrazabilidad],options:t.gestionesOptions,label:"Gestion",dense:"",outlined:"",style:{"min-width":"130px"},loading:t.loadingTrazabilidad},{prepend:b(()=>[r(E,{name:"event"})]),_:1},8,["modelValue","options","onUpdate:modelValue","loading"])]),o("div",Ke,[r(V,{modelValue:t.trazabilidad.producto_id,"onUpdate:modelValue":[i[11]||(i[11]=a=>t.trazabilidad.producto_id=a),l.cargarTrazabilidad],options:t.productosOptions,"option-label":"nombre_producto","option-value":"id","emit-value":"","map-options":"",label:"Producto",dense:"",outlined:"",style:{"min-width":"200px"},loading:t.loadingTrazabilidad},{prepend:b(()=>[r(E,{name:"inventory"})]),_:1},8,["modelValue","options","onUpdate:modelValue","loading"])]),o("div",Je,[r(Y,{color:"primary","text-color":"white",dense:""},{default:b(()=>[r(E,{name:"info",size:"16px",class:"q-mr-xs"}),j(" Temporada "+h(t.trazabilidad.gestion)+"-07 a "+h(t.trazabilidad.gestion+1)+"-06 ",1)]),_:1})])],64)):p("",!0)]),_:1})]),_:1}),r(L,{flat:"",bordered:"",class:"relative-position"},{default:b(()=>[r(Pe,{dense:"","wrap-cells":""},{default:b(()=>[o("thead",null,[o("tr",We,[i[16]||(i[16]=o("th",{class:"text-left"},"ID",-1)),i[17]||(i[17]=o("th",{class:"text-left"},"RUNSA",-1)),t.trazabilidadActiva?p("",!0):(c(),m("th",He,"Sub Cod.")),i[18]||(i[18]=o("th",{class:"text-left"},"Nombre completo",-1)),t.trazabilidadActiva?p("",!0):(c(),m("th",Xe,"CI")),t.trazabilidadActiva?p("",!0):(c(),m("th",Ye,"Celular")),t.trazabilidadActiva?p("",!0):(c(),m("th",Ze,"Comunidad")),i[19]||(i[19]=o("th",{class:"text-left"},"Estado",-1)),t.trazabilidadActiva?p("",!0):(c(),m("th",$e,"Registro")),t.trazabilidadActiva?(c(!0),m(U,{key:5},G(t.mesesTemporada,a=>(c(),m("th",{key:a.offset,class:"text-right bg-blue-10 mes-column"},[o("div",et,h(a.nombre),1),o("div",tt,h(a.offset<=5?t.trazabilidad.gestion:t.trazabilidad.gestion+1),1)]))),128)):p("",!0),t.trazabilidadActiva?(c(),m("th",at,i[15]||(i[15]=[o("div",{class:"text-caption"},"TOTAL",-1),o("div",{class:"text-caption text-weight-light"},"KG",-1)]))):p("",!0)])]),o("tbody",null,[(c(!0),m(U,null,G(t.rows,a=>(c(),m("tr",{key:a.id,class:"row-click",onClick:_=>l.openDetails(a)},[o("td",lt,h(a.id),1),o("td",ot,h(a.runsa||"-"),1),t.trazabilidadActiva?p("",!0):(c(),m("td",st,h(a.sub_codigo||"-"),1)),o("td",nt,[o("div",rt,h(a.nombre_completo),1),o("div",dt,h(a.municipio?.nombre_municipio||"-"),1)]),t.trazabilidadActiva?p("",!0):(c(),m("td",ut,h(a.numcarnet),1)),t.trazabilidadActiva?p("",!0):(c(),m("td",ct,h(a.num_celular||"-"),1)),t.trazabilidadActiva?p("",!0):(c(),m("td",mt,h(a.comunidad||"-"),1)),o("td",ft,[r(Y,{color:l.chipColor(a.estado),"text-color":"white",size:"xs",class:"text-bold"},{default:b(()=>[j(h(a.estado),1)]),_:2},1032,["color"])]),t.trazabilidadActiva?p("",!0):(c(),m("td",gt,h(a.fecha_registro),1)),t.trazabilidadActiva?(c(!0),m(U,{key:5},G(t.mesesTemporada,_=>(c(),m("td",{key:`${a.id}-${_.offset}`,class:ze(["text-right mes-column",[a.acopios_meses?.[_.offset]>0?l.colorPorCantidad(a.acopios_meses[_.offset]):"bg-grey-2"]])},[a.acopios_meses?.[_.offset]>0?(c(),m("div",pt,h(l.formatNumber(a.acopios_meses[_.offset])),1)):(c(),m("span",ht,"-"))],2))),128)):p("",!0),t.trazabilidadActiva?(c(),m("td",vt,h(l.formatNumber(a.total_acopios||0)),1)):p("",!0)],8,it))),128)),!t.loading&&t.rows?.length===0?(c(),m("tr",bt,[o("td",{colspan:t.trazabilidadActiva?15:9,class:"text-center text-grey q-pa-md"},"No hay resultados",8,_t)])):p("",!0)])]),_:1}),t.loading?(c(),m("div",yt,[r(we,{indeterminate:"",size:"40px"})])):p("",!0),o("div",xt,[o("div",kt,[i[20]||(i[20]=j("Total: ")),o("b",null,h(t.serverCount?.toLocaleString()),1)]),o("div",Ct,[r(V,{modelValue:t.pagination.perPage,"onUpdate:modelValue":[i[12]||(i[12]=a=>t.pagination.perPage=a),l.changePerPage],options:[10,25,50,100,150,200],dense:"",outlined:"",style:{width:"120px"},label:"Por página"},null,8,["modelValue","onUpdate:modelValue"]),r(Be,{modelValue:t.pagination.page,"onUpdate:modelValue":[i[13]||(i[13]=a=>t.pagination.page=a),l.changePage],max:l.pageCount,"max-pages":"8","direction-links":"","boundary-links":""},null,8,["modelValue","max","onUpdate:modelValue"])])])]),_:1})]),_:1})}const Ot=ye(Oe,[["render",Vt],["__scopeId","data-v-4d27c78e"]]);export{Ot as default};
