import{_ as w,c as u,o as p,w as o,b as f,a8 as c,a as e,f as g,Q as y,e as k,a7 as a,t as n,O as b}from"./index-Cl83UuLA.js";import{Q as q}from"./QSpace-dSNKkGFp.js";import{Q as d,b as i,a as r}from"./position-engine-D6nSYRF0.js";import{Q as C}from"./QBadge-DpwAwdG3.js";import{Q}from"./QList-BkXNU4f3.js";import{Q as v}from"./QTd-CmxqCGTJ.js";import{Q as P}from"./QTable-CiHXgcXp.js";import{Q as N}from"./QTooltip-CfInIkIR.js";import{Q as x}from"./QPage-BEA7z6sV.js";import"./selection-BFvblPyJ.js";import"./QMarkupTable-kt3qpGaC.js";import"./QSelect-Cxsf63Um.js";import"./QChip-CqufFhuY.js";import"./format-TNedi91C.js";import"./QLinearProgress-BFMhlV2o.js";import"./use-fullscreen-e78jS5-E.js";const S={name:"ProcesoDetalle",data(){return{proceso:null,loading:!1,columnasAcopios:[{name:"id",label:"ID",field:"id",align:"left"},{name:"fecha",label:"Fecha",field:"fecha_cosecha",align:"left"},{name:"productor",label:"Productor",field:"productor",align:"left"},{name:"cantidad",label:"Cantidad (kg)",field:s=>s.pivot?.cantidad_kg||s.cantidad_kg,align:"right",format:s=>Number(s).toFixed(2)}],columnasLotes:[{name:"codigo",label:"Codigo Lote",field:"codigo_lote",align:"left"},{name:"producto",label:"Producto",field:s=>s.producto?.nombre_producto||"",align:"left"},{name:"cantidad",label:"Cantidad (kg)",field:"cantidad_kg",align:"right",format:s=>Number(s).toFixed(2)},{name:"fecha_envasado",label:"Fecha Envasado",field:"fecha_envasado",align:"left"},{name:"qr",label:"QR",field:"qr",align:"center"}]}},mounted(){this.cargarProceso()},methods:{async cargarProceso(){this.loading=!0;try{const{data:s}=await this.$axios.get(`/control-procesos/${this.$route.params.id}`);this.proceso=s}catch{this.$q.notify({type:"negative",message:"Error al cargar proceso"}),this.$router.push("/control-procesos")}finally{this.loading=!1}},formatFecha(s){return s?new Date(s).toLocaleString():""},verQR(s){window.open(`/qr/${s.codigo_lote}`,"_blank")}}},A={class:"row items-center q-gutter-sm q-mb-md"},F={class:"row q-col-gutter-md"},L={class:"col-12 col-md-6"},T={class:"col-12 col-md-6"};function E(s,l,h,B,t,_){return p(),u(x,{class:"q-pa-md"},{default:o(()=>[f("div",A,[e(g,{flat:"",round:"",icon:"arrow_back",onClick:l[0]||(l[0]=m=>s.$router.push("/control-procesos"))}),l[1]||(l[1]=f("div",{class:"text-h6"},"Proceso Productivo",-1)),e(q),e(g,{flat:"",round:"",icon:"refresh",loading:t.loading,onClick:_.cargarProceso},null,8,["loading","onClick"])]),t.proceso?(p(),u(y,{key:0,flat:"",bordered:""},{default:o(()=>[e(k,null,{default:o(()=>[f("div",F,[f("div",L,[e(Q,null,{default:o(()=>[e(d,null,{default:o(()=>[e(i,null,{default:o(()=>[e(r,{caption:""},{default:o(()=>l[2]||(l[2]=[a("Estado")])),_:1}),e(r,null,{default:o(()=>[e(C,{color:t.proceso.estado==="EN_PROCESO"?"warning":"positive"},{default:o(()=>[a(n(t.proceso.estado),1)]),_:1},8,["color"])]),_:1})]),_:1})]),_:1}),e(d,null,{default:o(()=>[e(i,null,{default:o(()=>[e(r,{caption:""},{default:o(()=>l[3]||(l[3]=[a("Fecha de Proceso")])),_:1}),e(r,null,{default:o(()=>[a(n(_.formatFecha(t.proceso.fecha_proceso)),1)]),_:1})]),_:1})]),_:1}),e(d,null,{default:o(()=>[e(i,null,{default:o(()=>[e(r,{caption:""},{default:o(()=>l[4]||(l[4]=[a("Tanque")])),_:1}),e(r,null,{default:o(()=>[a(n(t.proceso.tanque?.nombre_tanque||"N/A"),1)]),_:1})]),_:1})]),_:1}),e(d,null,{default:o(()=>[e(i,null,{default:o(()=>[e(r,{caption:""},{default:o(()=>l[5]||(l[5]=[a("Planta")])),_:1}),e(r,null,{default:o(()=>[a(n(t.proceso.tanque?.planta?.nombre_planta||"N/A"),1)]),_:1})]),_:1})]),_:1}),e(d,null,{default:o(()=>[e(i,null,{default:o(()=>[e(r,{caption:""},{default:o(()=>l[6]||(l[6]=[a("Operador")])),_:1}),e(r,null,{default:o(()=>[a(n(t.proceso.user?.username||"N/A"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),f("div",T,[e(Q,null,{default:o(()=>[e(d,null,{default:o(()=>[e(i,null,{default:o(()=>[e(r,{caption:""},{default:o(()=>l[7]||(l[7]=[a("Cantidad Entrada")])),_:1}),e(r,null,{default:o(()=>[a(n(t.proceso.cantidad_entrada_kg)+" kg",1)]),_:1})]),_:1})]),_:1}),t.proceso.cantidad_salida_kg?(p(),u(d,{key:0},{default:o(()=>[e(i,null,{default:o(()=>[e(r,{caption:""},{default:o(()=>l[8]||(l[8]=[a("Cantidad Salida")])),_:1}),e(r,null,{default:o(()=>[a(n(t.proceso.cantidad_salida_kg)+" kg",1)]),_:1})]),_:1})]),_:1})):c("",!0),t.proceso.merma_kg?(p(),u(d,{key:1},{default:o(()=>[e(i,null,{default:o(()=>[e(r,{caption:""},{default:o(()=>l[9]||(l[9]=[a("Merma")])),_:1}),e(r,null,{default:o(()=>[a(n(t.proceso.merma_kg)+" kg ("+n(t.proceso.merma_porcentaje)+"%)",1)]),_:1})]),_:1})]),_:1})):c("",!0),t.proceso.temperatura_proceso?(p(),u(d,{key:2},{default:o(()=>[e(i,null,{default:o(()=>[e(r,{caption:""},{default:o(()=>l[10]||(l[10]=[a("Temperatura de Proceso")])),_:1}),e(r,null,{default:o(()=>[a(n(t.proceso.temperatura_proceso)+" C",1)]),_:1})]),_:1})]),_:1})):c("",!0),t.proceso.tiempo_proceso_horas?(p(),u(d,{key:3},{default:o(()=>[e(i,null,{default:o(()=>[e(r,{caption:""},{default:o(()=>l[11]||(l[11]=[a("Tiempo de Proceso")])),_:1}),e(r,null,{default:o(()=>[a(n(t.proceso.tiempo_proceso_horas)+" horas",1)]),_:1})]),_:1})]),_:1})):c("",!0),t.proceso.metodo_proceso?(p(),u(d,{key:4},{default:o(()=>[e(i,null,{default:o(()=>[e(r,{caption:""},{default:o(()=>l[12]||(l[12]=[a("Metodo")])),_:1}),e(r,null,{default:o(()=>[a(n(t.proceso.metodo_proceso),1)]),_:1})]),_:1})]),_:1})):c("",!0)]),_:1})])]),t.proceso.observaciones?(p(),u(d,{key:0},{default:o(()=>[e(i,null,{default:o(()=>[e(r,{caption:""},{default:o(()=>l[13]||(l[13]=[a("Observaciones")])),_:1}),e(r,null,{default:o(()=>[a(n(t.proceso.observaciones),1)]),_:1})]),_:1})]),_:1})):c("",!0)]),_:1}),e(b),e(k,null,{default:o(()=>[l[14]||(l[14]=f("div",{class:"text-h6 q-mb-md"},"Acopios Procesados",-1)),e(P,{rows:t.proceso.acopios||[],columns:t.columnasAcopios,"row-key":"id",flat:"",pagination:{rowsPerPage:0},"hide-pagination":""},{"body-cell-productor":o(m=>[e(v,{props:m},{default:o(()=>[a(n(m.row.apiario?.productor?.nombre_completo||"N/A"),1)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1}),e(b),e(k,null,{default:o(()=>[l[16]||(l[16]=f("div",{class:"text-h6 q-mb-md"},"Lotes Generados",-1)),e(P,{rows:t.proceso.lotes||[],columns:t.columnasLotes,"row-key":"id",flat:"",pagination:{rowsPerPage:0},"hide-pagination":""},{"body-cell-qr":o(m=>[e(v,{props:m},{default:o(()=>[e(g,{flat:"",dense:"",icon:"qr_code",color:"primary",onClick:D=>_.verQR(m.row),size:"sm"},{default:o(()=>[e(N,null,{default:o(()=>l[15]||(l[15]=[a("Ver QR")])),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1})]),_:1})):c("",!0)]),_:1})}const $=w(S,[["render",E]]);export{$ as default};
