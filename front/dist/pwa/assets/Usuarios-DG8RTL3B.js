import{j as ie,k as f,l as u,m as ye,g as Se,a8 as je,K as Gt,a9 as St,M as Wt,r as X,aa as Kt,P as Jt,ab as Xt,R as Zt,ac as Yt,s as W,v as Je,z as nt,E as rt,ad as wt,ae as el,J as tl,x as ll,d as $,af as st,ag as al,V as ol,ah as nl,ai as rl,aj as Ct,ak as sl,L as Pt,O as _t,al as il,am as Xe,an as it,ao as ul,U as kt,ap as cl,aq as $e,ar as fe,f as D,a3 as dl,_ as vl,c as A,o as F,w as v,a as r,b as G,a0 as ge,$ as ze,a1 as He,a2 as Ie,Z as j,t as oe,a5 as fl,W as me,as as ne,h as Ge,Q as We,e as re,at as gl,au as ml}from"./index--cRk6gQu.js";import{v as bl,e as ut,u as hl,p as ct,f as yl,g as Sl,h as wl,r as dt,s as Cl,d as vt,Q as se,a as L,c as be}from"./format-BzETV7Yi.js";import{a as Ze,Q as Pl,C as he}from"./ClosePopup-Dnr3QA3a.js";import{Q as _l}from"./QImg-D_4cfcCG.js";import{c as ft}from"./selection-Dsf8oOwm.js";import{Q as gt}from"./QBadge-CQjEBIFf.js";import{Q as kl}from"./QMarkupTable-DCwPCXvL.js";import{u as pl,a as ql,c as pt,Q as qt}from"./QSelect-OpRcc1Xw.js";import{u as xl,a as Tl,b as Rl}from"./use-fullscreen-ClTOA6yk.js";import{Q as Ke}from"./QSpace-DeWfYgbd.js";import{Q as mt}from"./QForm-S5_dUhpu.js";import{Q as Vl}from"./QPage-D4ZSi_d2.js";import"./moment-C5S46NFB.js";const Re=ie({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:t}){const n=Se(),g=f(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return u("td",{class:g.value},ye(t.default));const o=n.vnode.key,d=(e.props.colsMap!==void 0?e.props.colsMap[o]:null)||e.props.col;if(d===void 0)return;const{row:a}=e.props;return u("td",{class:g.value+d.__tdClass(a),style:d.__tdStyle(a)},ye(t.default))}}}),Fl=ie({name:"QTooltip",inheritAttrs:!1,props:{...hl,...Wt,...je,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...je.transitionShow,default:"jump-down"},transitionHide:{...je.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:ut},self:{type:String,default:"top middle",validator:ut},offset:{type:Array,default:()=>[14,14],validator:bl},scrollTarget:St,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Gt],setup(e,{slots:t,emit:n,attrs:g}){let o,d;const a=Se(),{proxy:{$q:i}}=a,m=X(null),S=X(!1),s=f(()=>ct(e.anchor,i.lang.rtl)),C=f(()=>ct(e.self,i.lang.rtl)),_=f(()=>e.persistent!==!0),{registerTick:k,removeTick:p}=Kt(),{registerTimeout:P}=Jt(),{transitionProps:w,transitionStyle:Q}=Xt(e),{localScrollTarget:B,changeScrollEvent:E,unconfigureScrollTarget:R}=yl(e,Ce),{anchorEl:q,canShow:Z,anchorEvents:K}=Sl({showing:S,configureAnchorEl:ee}),{show:ue,hide:Y}=Zt({showing:S,canShow:Z,handleShow:we,handleHide:Oe,hideOnRouteChange:_,processOnMount:!0});Object.assign(K,{delayShow:de,delayHide:De});const{showPortal:U,hidePortal:z,renderPortal:Fe}=Yt(a,m,Pe,"tooltip");if(i.platform.is.mobile===!0){const O={anchorEl:q,innerRef:m,onClickOutside(I){return Y(I),I.target.classList.contains("q-dialog__backdrop")&&tl(I),!0}},ve=f(()=>e.modelValue===null&&e.persistent!==!0&&S.value===!0);W(ve,I=>{(I===!0?wl:dt)(O)}),Je(()=>{dt(O)})}function we(O){U(),k(()=>{d=new MutationObserver(()=>H()),d.observe(m.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),H(),Ce()}),o===void 0&&(o=W(()=>i.screen.width+"|"+i.screen.height+"|"+e.self+"|"+e.anchor+"|"+i.lang.rtl,H)),P(()=>{U(!0),n("show",O)},e.transitionDuration)}function Oe(O){p(),z(),ce(),P(()=>{z(!0),n("hide",O)},e.transitionDuration)}function ce(){d!==void 0&&(d.disconnect(),d=void 0),o!==void 0&&(o(),o=void 0),R(),nt(K,"tooltipTemp")}function H(){Cl({targetEl:m.value,offset:e.offset,anchorEl:q.value,anchorOrigin:s.value,selfOrigin:C.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function de(O){if(i.platform.is.mobile===!0){ft(),document.body.classList.add("non-selectable");const ve=q.value,I=["touchmove","touchcancel","touchend","click"].map(te=>[ve,te,"delayHide","passiveCapture"]);rt(K,"tooltipTemp",I)}P(()=>{ue(O)},e.delay)}function De(O){i.platform.is.mobile===!0&&(nt(K,"tooltipTemp"),ft(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),P(()=>{Y(O)},e.hideDelay)}function ee(){if(e.noParentEvent===!0||q.value===null)return;const O=i.platform.is.mobile===!0?[[q.value,"touchstart","delayShow","passive"]]:[[q.value,"mouseenter","delayShow","passive"],[q.value,"mouseleave","delayHide","passive"]];rt(K,"anchor",O)}function Ce(){if(q.value!==null||e.scrollTarget!==void 0){B.value=wt(q.value,e.scrollTarget);const O=e.noParentEvent===!0?H:Y;E(B.value,O)}}function M(){return S.value===!0?u("div",{...g,ref:m,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",g.class],style:[g.style,Q.value],role:"tooltip"},ye(t.default)):null}function Pe(){return u(el,w.value,M)}return Je(ce),Object.assign(a.proxy,{updatePosition:H}),Fe}}),Ol=ie({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:t,emit:n}){const g=Se(),{proxy:{$q:o}}=g,d=a=>{n("click",a)};return()=>{if(e.props===void 0)return u("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:d},ye(t.default));let a,i;const m=g.vnode.key;if(m){if(a=e.props.colsMap[m],a===void 0)return}else a=e.props.col;if(a.sortable===!0){const s=a.align==="right"?"unshift":"push";i=ll(t.default,[]),i[s](u($,{class:a.__iconClass,name:o.iconSet.table.arrowUp}))}else i=ye(t.default);const S={class:a.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:a.headerStyle,onClick:s=>{a.sortable===!0&&e.props.sort(a),d(s)}};return u("th",S,i)}}});function xt(e,t){return u("div",e,[u("table",{class:"q-table"},t)])}const Dl={list:Ze,table:kl},Bl=["list","table","__qtable"],Ql=ie({name:"QVirtualScroll",props:{...pl,type:{type:String,default:"list",validator:e=>Bl.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:St},setup(e,{slots:t,attrs:n}){let g;const o=X(null),d=f(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:a,localResetVirtualScroll:i,padVirtualScroll:m,onVirtualScrollEvt:S}=ql({virtualScrollLength:d,getVirtualScrollTarget:p,getVirtualScrollEl:k}),s=f(()=>{if(d.value===0)return[];const B=(E,R)=>({index:a.value.from+R,item:E});return e.itemsFn===void 0?e.items.slice(a.value.from,a.value.to).map(B):e.itemsFn(a.value.from,a.value.to-a.value.from).map(B)}),C=f(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),_=f(()=>e.scrollTarget!==void 0?{}:{tabindex:0});W(d,()=>{i()}),W(()=>e.scrollTarget,()=>{w(),P()});function k(){return o.value.$el||o.value}function p(){return g}function P(){g=wt(k(),e.scrollTarget),g.addEventListener("scroll",S,st.passive)}function w(){g!==void 0&&(g.removeEventListener("scroll",S,st.passive),g=void 0)}function Q(){let B=m(e.type==="list"?"div":"tbody",s.value.map(t.default));return t.before!==void 0&&(B=t.before().concat(B)),Ct(t.after,B)}return al(()=>{i()}),ol(()=>{P()}),nl(()=>{P()}),rl(()=>{w()}),Je(()=>{w()}),()=>{if(t.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?xt({ref:o,class:"q-table__middle "+C.value},Q()):u(Dl[e.type],{...n,ref:o,class:[n.class,C.value],..._.value},Q)}}}),Al={xs:2,sm:4,md:6,lg:10,xl:14};function bt(e,t,n){return{transform:t===!0?`translateX(${n.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}const El=ie({name:"QLinearProgress",props:{...Pt,...sl,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:t}){const{proxy:n}=Se(),g=_t(e,n.$q),o=il(e,Al),d=f(()=>e.indeterminate===!0||e.query===!0),a=f(()=>e.reverse!==e.query),i=f(()=>({...o.value!==null?o.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),m=f(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),S=f(()=>bt(e.buffer!==void 0?e.buffer:1,a.value,n.$q)),s=f(()=>`with${e.instantFeedback===!0?"out":""}-transition`),C=f(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${s.value} q-linear-progress__track--${g.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),_=f(()=>bt(d.value===!0?1:e.value,a.value,n.$q)),k=f(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${s.value} q-linear-progress__model--${d.value===!0?"in":""}determinate`),p=f(()=>({width:`${e.value*100}%`})),P=f(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${s.value}`);return()=>{const w=[u("div",{class:C.value,style:S.value}),u("div",{class:k.value,style:_.value})];return e.stripe===!0&&d.value===!1&&w.push(u("div",{class:P.value,style:p.value})),u("div",{class:m.value,style:i.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},Ct(t.default,w))}}});function Ll(e,t){return new Date(e)-new Date(t)}const Ul={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Ml(e,t,n,g){const o=f(()=>{const{sortBy:i}=t.value;return i&&n.value.find(m=>m.name===i)||null}),d=f(()=>e.sortMethod!==void 0?e.sortMethod:(i,m,S)=>{const s=n.value.find(k=>k.name===m);if(s===void 0||s.field===void 0)return i;const C=S===!0?-1:1,_=typeof s.field=="function"?k=>s.field(k):k=>k[s.field];return i.sort((k,p)=>{let P=_(k),w=_(p);return s.rawSort!==void 0?s.rawSort(P,w,k,p)*C:P==null?-1*C:w==null?1*C:s.sort!==void 0?s.sort(P,w,k,p)*C:Xe(P)===!0&&Xe(w)===!0?(P-w)*C:it(P)===!0&&it(w)===!0?Ll(P,w)*C:typeof P=="boolean"&&typeof w=="boolean"?(P-w)*C:([P,w]=[P,w].map(Q=>(Q+"").toLocaleString().toLowerCase()),P<w?-1*C:P===w?0:C)})});function a(i){let m=e.columnSortOrder;if(ul(i)===!0)i.sortOrder&&(m=i.sortOrder),i=i.name;else{const C=n.value.find(_=>_.name===i);C?.sortOrder&&(m=C.sortOrder)}let{sortBy:S,descending:s}=t.value;S!==i?(S=i,s=m==="da"):e.binaryStateSort===!0?s=!s:s===!0?m==="ad"?S=null:s=!1:m==="ad"?s=!0:S=null,g({sortBy:S,descending:s,page:1})}return{columnToSort:o,computedSortMethod:d,sort:a}}const Nl={filter:[String,Object],filterMethod:Function};function jl(e,t){const n=f(()=>e.filterMethod!==void 0?e.filterMethod:(g,o,d,a)=>{const i=o?o.toLowerCase():"";return g.filter(m=>d.some(S=>{const s=a(S,m)+"";return(s==="undefined"||s==="null"?"":s.toLowerCase()).indexOf(i)!==-1}))});return W(()=>e.filter,()=>{kt(()=>{t({page:1},!0)})},{deep:!0}),{computedFilterMethod:n}}function $l(e,t){for(const n in t)if(t[n]!==e[n])return!1;return!0}function ht(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const zl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Hl(e,t){const{props:n,emit:g}=e,o=X(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:n.rowsPerPageOptions.length!==0?n.rowsPerPageOptions[0]:5},n.pagination)),d=f(()=>{const s=n["onUpdate:pagination"]!==void 0?{...o.value,...n.pagination}:o.value;return ht(s)}),a=f(()=>d.value.rowsNumber!==void 0);function i(s){m({pagination:s,filter:n.filter})}function m(s={}){kt(()=>{g("request",{pagination:s.pagination||d.value,filter:s.filter||n.filter,getCellValue:t})})}function S(s,C){const _=ht({...d.value,...s});if($l(d.value,_)===!0){a.value===!0&&C===!0&&i(_);return}if(a.value===!0){i(_);return}n.pagination!==void 0&&n["onUpdate:pagination"]!==void 0?g("update:pagination",_):o.value=_}return{innerPagination:o,computedPagination:d,isServerSide:a,requestServerInteraction:m,setPagination:S}}function Il(e,t,n,g,o,d){const{props:a,emit:i,proxy:{$q:m}}=e,S=f(()=>g.value===!0?n.value.rowsNumber||0:d.value),s=f(()=>{const{page:R,rowsPerPage:q}=n.value;return(R-1)*q}),C=f(()=>{const{page:R,rowsPerPage:q}=n.value;return R*q}),_=f(()=>n.value.page===1),k=f(()=>n.value.rowsPerPage===0?1:Math.max(1,Math.ceil(S.value/n.value.rowsPerPage))),p=f(()=>C.value===0?!0:n.value.page>=k.value),P=f(()=>(a.rowsPerPageOptions.includes(t.value.rowsPerPage)?a.rowsPerPageOptions:[t.value.rowsPerPage].concat(a.rowsPerPageOptions)).map(q=>({label:q===0?m.lang.table.allRows:""+q,value:q})));W(k,(R,q)=>{if(R===q)return;const Z=n.value.page;R&&!Z?o({page:1}):R<Z&&o({page:R})});function w(){o({page:1})}function Q(){const{page:R}=n.value;R>1&&o({page:R-1})}function B(){const{page:R,rowsPerPage:q}=n.value;C.value>0&&R*q<S.value&&o({page:R+1})}function E(){o({page:k.value})}return a["onUpdate:pagination"]!==void 0&&i("update:pagination",{...n.value}),{firstRowIndex:s,lastRowIndex:C,isFirstPage:_,isLastPage:p,pagesNumber:k,computedRowsPerPageOptions:P,computedRowsNumber:S,firstPage:w,prevPage:Q,nextPage:B,lastPage:E}}const Gl={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},Wl=["update:selected","selection"];function Kl(e,t,n,g){const o=f(()=>{const p={};return e.selected.map(g.value).forEach(P=>{p[P]=!0}),p}),d=f(()=>e.selection!=="none"),a=f(()=>e.selection==="single"),i=f(()=>e.selection==="multiple"),m=f(()=>n.value.length!==0&&n.value.every(p=>o.value[g.value(p)]===!0)),S=f(()=>m.value!==!0&&n.value.some(p=>o.value[g.value(p)]===!0)),s=f(()=>e.selected.length);function C(p){return o.value[p]===!0}function _(){t("update:selected",[])}function k(p,P,w,Q){t("selection",{rows:P,added:w,keys:p,evt:Q});const B=a.value===!0?w===!0?P:[]:w===!0?e.selected.concat(P):e.selected.filter(E=>p.includes(g.value(E))===!1);t("update:selected",B)}return{hasSelectionMode:d,singleSelection:a,multipleSelection:i,allRowsSelected:m,someRowsSelected:S,rowsSelectedNumber:s,isRowSelected:C,clearSelection:_,updateSelection:k}}function yt(e){return Array.isArray(e)?e.slice():[]}const Jl={expanded:Array},Xl=["update:expanded"];function Zl(e,t){const n=X(yt(e.expanded));W(()=>e.expanded,a=>{n.value=yt(a)});function g(a){return n.value.includes(a)}function o(a){e.expanded!==void 0?t("update:expanded",a):n.value=a}function d(a,i){const m=n.value.slice(),S=m.indexOf(a);i===!0?S===-1&&(m.push(a),o(m)):S!==-1&&(m.splice(S,1),o(m))}return{isRowExpanded:g,setExpanded:o,updateExpanded:d}}const Yl={visibleColumns:Array};function ea(e,t,n){const g=f(()=>{if(e.columns!==void 0)return e.columns;const i=e.rows[0];return i!==void 0?Object.keys(i).map(m=>({name:m,label:m.toUpperCase(),field:m,align:Xe(i[m])?"right":"left",sortable:!0})):[]}),o=f(()=>{const{sortBy:i,descending:m}=t.value;return(e.visibleColumns!==void 0?g.value.filter(s=>s.required===!0||e.visibleColumns.includes(s.name)===!0):g.value).map(s=>{const C=s.align||"right",_=`text-${C}`;return{...s,align:C,__iconClass:`q-table__sort-icon q-table__sort-icon--${C}`,__thClass:_+(s.headerClasses!==void 0?" "+s.headerClasses:"")+(s.sortable===!0?" sortable":"")+(s.name===i?` sorted ${m===!0?"sort-desc":""}`:""),__tdStyle:s.style!==void 0?typeof s.style!="function"?()=>s.style:s.style:()=>null,__tdClass:s.classes!==void 0?typeof s.classes!="function"?()=>_+" "+s.classes:k=>_+" "+s.classes(k):()=>_}})}),d=f(()=>{const i={};return o.value.forEach(m=>{i[m.name]=m}),i}),a=f(()=>e.tableColspan!==void 0?e.tableColspan:o.value.length+(n.value===!0?1:0));return{colList:g,computedCols:o,computedColsMap:d,computedColspan:a}}const Ve="q-table__bottom row items-center",Tt={};pt.forEach(e=>{Tt[e]={}});const ta=ie({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...Tt,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],tableRowStyleFn:Function,tableRowClassFn:Function,cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],cardStyleFn:Function,cardClassFn:Function,hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Pt,...Tl,...Yl,...Nl,...zl,...Jl,...Gl,...Ul},emits:["request","virtualScroll",...xl,...Xl,...Wl],setup(e,{slots:t,emit:n}){const g=Se(),{proxy:{$q:o}}=g,d=_t(e,o),{inFullscreen:a,toggleFullscreen:i}=Rl(),m=f(()=>typeof e.rowKey=="function"?e.rowKey:l=>l[e.rowKey]),S=X(null),s=X(null),C=f(()=>e.grid!==!0&&e.virtualScroll===!0),_=f(()=>" q-table__card"+(d.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),k=f(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":_.value)+(d.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(a.value===!0?" fullscreen scroll":"")),p=f(()=>k.value+(e.loading===!0?" q-table--loading":""));W(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+k.value,()=>{C.value===!0&&s.value?.reset()});const{innerPagination:P,computedPagination:w,isServerSide:Q,requestServerInteraction:B,setPagination:E}=Hl(g,le),{computedFilterMethod:R}=jl(e,E),{isRowExpanded:q,setExpanded:Z,updateExpanded:K}=Zl(e,n),ue=f(()=>{let l=e.rows;if(Q.value===!0||l.length===0)return l;const{sortBy:c,descending:b}=w.value;return e.filter&&(l=R.value(l,e.filter,M.value,le)),ve.value!==null&&(l=I.value(e.rows===l?l.slice():l,c,b)),l}),Y=f(()=>ue.value.length),U=f(()=>{let l=ue.value;if(Q.value===!0)return l;const{rowsPerPage:c}=w.value;return c!==0&&(_e.value===0&&e.rows!==l?l.length>ke.value&&(l=l.slice(0,ke.value)):l=l.slice(_e.value,ke.value)),l}),{hasSelectionMode:z,singleSelection:Fe,multipleSelection:we,allRowsSelected:Oe,someRowsSelected:ce,rowsSelectedNumber:H,isRowSelected:de,clearSelection:De,updateSelection:ee}=Kl(e,n,U,m),{colList:Ce,computedCols:M,computedColsMap:Pe,computedColspan:O}=ea(e,w,z),{columnToSort:ve,computedSortMethod:I,sort:te}=Ml(e,w,Ce,E),{firstRowIndex:_e,lastRowIndex:ke,isFirstPage:Be,isLastPage:Qe,pagesNumber:pe,computedRowsPerPageOptions:Rt,computedRowsNumber:qe,firstPage:Ae,prevPage:Ee,nextPage:Le,lastPage:Ue}=Il(g,P,w,Q,E,Y),Vt=f(()=>U.value.length===0),Ft=f(()=>{const l={};return pt.forEach(c=>{l[c]=e[c]}),l.virtualScrollItemSize===void 0&&(l.virtualScrollItemSize=e.dense===!0?28:48),l});function Ot(){C.value===!0&&s.value.reset()}function Dt(){if(e.grid===!0)return Ht();const l=e.hideHeader!==!0?at:null;if(C.value===!0){const b=t["top-row"],h=t["bottom-row"],y={default:V=>et(V.item,t.body,V.index)};if(b!==void 0){const V=u("tbody",b({cols:M.value}));y.before=l===null?()=>V:()=>[l()].concat(V)}else l!==null&&(y.before=l);return h!==void 0&&(y.after=()=>u("tbody",h({cols:M.value}))),u(Ql,{ref:s,class:e.tableClass,style:e.tableStyle,...Ft.value,scrollTarget:e.virtualScrollTarget,items:U.value,type:"__qtable",tableColspan:O.value,onVirtualScroll:Qt},y)}const c=[At()];return l!==null&&c.unshift(l()),xt({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},c)}function Bt(l,c){if(s.value!==null){s.value.scrollTo(l,c);return}l=parseInt(l,10);const b=S.value.querySelector(`tbody tr:nth-of-type(${l+1})`);if(b!==null){const h=S.value.querySelector(".q-table__middle.scroll"),y=b.offsetTop-e.virtualScrollStickySizeStart,V=y<h.scrollTop?"decrease":"increase";h.scrollTop=y,n("virtualScroll",{index:l,from:0,to:P.value.rowsPerPage-1,direction:V})}}function Qt(l){n("virtualScroll",l)}function Ye(){return[u(El,{class:"q-table__linear-progress",color:e.color,dark:d.value,indeterminate:!0,trackColor:"transparent"})]}function et(l,c,b){const h=m.value(l),y=de(h);if(c!==void 0){const T={key:h,row:l,pageIndex:b,__trClass:y?"selected":""};if(e.tableRowStyleFn!==void 0&&(T.__trStyle=e.tableRowStyleFn(l)),e.tableRowClassFn!==void 0){const J=e.tableRowClassFn(l);J&&(T.__trClass=`${J} ${T.__trClass}`)}return c(tt(T))}const V=t["body-cell"],x=M.value.map(T=>{const J=t[`body-cell-${T.name}`],Te=J!==void 0?J:V;return Te!==void 0?Te(Et({key:h,row:l,pageIndex:b,col:T})):u("td",{class:T.__tdClass(l),style:T.__tdStyle(l)},le(T,l))});if(z.value===!0){const T=t["body-selection"],J=T!==void 0?T(Lt({key:h,row:l,pageIndex:b})):[u($e,{modelValue:y,color:e.color,dark:d.value,dense:e.dense,"onUpdate:modelValue":(Te,It)=>{ee([h],[l],Te,It)}})];x.unshift(u("td",{class:"q-table--col-auto-width"},J))}const N={key:h,class:{selected:y}};if(e.onRowClick!==void 0&&(N.class["cursor-pointer"]=!0,N.onClick=T=>{n("rowClick",T,l,b)}),e.onRowDblclick!==void 0&&(N.class["cursor-pointer"]=!0,N.onDblclick=T=>{n("rowDblclick",T,l,b)}),e.onRowContextmenu!==void 0&&(N.class["cursor-pointer"]=!0,N.onContextmenu=T=>{n("rowContextmenu",T,l,b)}),e.tableRowStyleFn!==void 0&&(N.style=e.tableRowStyleFn(l)),e.tableRowClassFn!==void 0){const T=e.tableRowClassFn(l);T&&(N.class[T]=!0)}return u("tr",N,x)}function At(){const l=t.body,c=t["top-row"],b=t["bottom-row"];let h=U.value.map((y,V)=>et(y,l,V));return c!==void 0&&(h=c({cols:M.value}).concat(h)),b!==void 0&&(h=h.concat(b({cols:M.value}))),u("tbody",h)}function tt(l){return Me(l),l.cols=l.cols.map(c=>fe({...c},"value",()=>le(c,l.row))),l}function Et(l){return Me(l),fe(l,"value",()=>le(l.col,l.row)),l}function Lt(l){return Me(l),l}function Me(l){Object.assign(l,{cols:M.value,colsMap:Pe.value,sort:te,rowIndex:_e.value+l.pageIndex,color:e.color,dark:d.value,dense:e.dense}),z.value===!0&&fe(l,"selected",()=>de(l.key),(c,b)=>{ee([l.key],[l.row],c,b)}),fe(l,"expand",()=>q(l.key),c=>{K(l.key,c)})}function le(l,c){const b=typeof l.field=="function"?l.field(c):c[l.field];return l.format!==void 0?l.format(b,c):b}const ae=f(()=>({pagination:w.value,pagesNumber:pe.value,isFirstPage:Be.value,isLastPage:Qe.value,firstPage:Ae,prevPage:Ee,nextPage:Le,lastPage:Ue,inFullscreen:a.value,toggleFullscreen:i}));function Ut(){const l=t.top,c=t["top-left"],b=t["top-right"],h=t["top-selection"],y=z.value===!0&&h!==void 0&&H.value>0,V="q-table__top relative-position row items-center";if(l!==void 0)return u("div",{class:V},[l(ae.value)]);let x;if(y===!0?x=h(ae.value).slice():(x=[],c!==void 0?x.push(u("div",{class:"q-table__control"},[c(ae.value)])):e.title&&x.push(u("div",{class:"q-table__control"},[u("div",{class:["q-table__title",e.titleClass]},e.title)]))),b!==void 0&&(x.push(u("div",{class:"q-table__separator col"})),x.push(u("div",{class:"q-table__control"},[b(ae.value)]))),x.length!==0)return u("div",{class:V},x)}const lt=f(()=>ce.value===!0?null:Oe.value);function at(){const l=Mt();return e.loading===!0&&t.loading===void 0&&l.push(u("tr",{class:"q-table__progress"},[u("th",{class:"relative-position",colspan:O.value},Ye())])),u("thead",l)}function Mt(){const l=t.header,c=t["header-cell"];if(l!==void 0)return l(Ne({header:!0})).slice();const b=M.value.map(h=>{const y=t[`header-cell-${h.name}`],V=y!==void 0?y:c,x=Ne({col:h});return V!==void 0?V(x):u(Ol,{key:h.name,props:x},()=>h.label)});if(Fe.value===!0&&e.grid!==!0)b.unshift(u("th",{class:"q-table--col-auto-width"}," "));else if(we.value===!0){const h=t["header-selection"],y=h!==void 0?h(Ne({})):[u($e,{color:e.color,modelValue:lt.value,dark:d.value,dense:e.dense,"onUpdate:modelValue":ot})];b.unshift(u("th",{class:"q-table--col-auto-width"},y))}return[u("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},b)]}function Ne(l){return Object.assign(l,{cols:M.value,sort:te,colsMap:Pe.value,color:e.color,dark:d.value,dense:e.dense}),we.value===!0&&fe(l,"selected",()=>lt.value,ot),l}function ot(l){ce.value===!0&&(l=!1),ee(U.value.map(m.value),U.value,l)}const xe=f(()=>{const l=[e.iconFirstPage||o.iconSet.table.firstPage,e.iconPrevPage||o.iconSet.table.prevPage,e.iconNextPage||o.iconSet.table.nextPage,e.iconLastPage||o.iconSet.table.lastPage];return o.lang.rtl===!0?l.reverse():l});function Nt(){if(e.hideBottom===!0)return;if(Vt.value===!0){if(e.hideNoData===!0)return;const b=e.loading===!0?e.loadingLabel||o.lang.table.loading:e.filter?e.noResultsLabel||o.lang.table.noResults:e.noDataLabel||o.lang.table.noData,h=t["no-data"],y=h!==void 0?[h({message:b,icon:o.iconSet.table.warning,filter:e.filter})]:[u($,{class:"q-table__bottom-nodata-icon",name:o.iconSet.table.warning}),b];return u("div",{class:Ve+" q-table__bottom--nodata"},y)}const l=t.bottom;if(l!==void 0)return u("div",{class:Ve},[l(ae.value)]);const c=e.hideSelectedBanner!==!0&&z.value===!0&&H.value>0?[u("div",{class:"q-table__control"},[u("div",[(e.selectedRowsLabel||o.lang.table.selectedRecords)(H.value)])])]:[];if(e.hidePagination!==!0)return u("div",{class:Ve+" justify-end"},$t(c));if(c.length!==0)return u("div",{class:Ve},c)}function jt(l){E({page:1,rowsPerPage:l.value})}function $t(l){let c;const{rowsPerPage:b}=w.value,h=e.paginationLabel||o.lang.table.pagination,y=t.pagination,V=e.rowsPerPageOptions.length>1;if(l.push(u("div",{class:"q-table__separator col"})),V===!0&&l.push(u("div",{class:"q-table__control"},[u("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||o.lang.table.recordsPerPage]),u(qt,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:b,options:Rt.value,displayValue:b===0?o.lang.table.allRows:b,dark:d.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":jt})])),y!==void 0)c=y(ae.value);else if(c=[u("span",b!==0?{class:"q-table__bottom-item"}:{},[b?h(_e.value+1,Math.min(ke.value,qe.value),qe.value):h(1,Y.value,qe.value)])],b!==0&&pe.value>1){const x={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(x.size="sm"),pe.value>2&&c.push(u(D,{key:"pgFirst",...x,icon:xe.value[0],disable:Be.value,ariaLabel:o.lang.pagination.first,onClick:Ae})),c.push(u(D,{key:"pgPrev",...x,icon:xe.value[1],disable:Be.value,ariaLabel:o.lang.pagination.prev,onClick:Ee}),u(D,{key:"pgNext",...x,icon:xe.value[2],disable:Qe.value,ariaLabel:o.lang.pagination.next,onClick:Le})),pe.value>2&&c.push(u(D,{key:"pgLast",...x,icon:xe.value[3],disable:Qe.value,ariaLabel:o.lang.pagination.last,onClick:Ue}))}return l.push(u("div",{class:"q-table__control"},c)),l}function zt(){const l=e.gridHeader===!0?[u("table",{class:"q-table"},[at()])]:e.loading===!0&&t.loading===void 0?Ye():void 0;return u("div",{class:"q-table__middle"},l)}function Ht(){const l=t.item!==void 0?t.item:c=>{const b=c.cols.map(y=>u("div",{class:"q-table__grid-item-row"},[u("div",{class:"q-table__grid-item-title"},[y.label]),u("div",{class:"q-table__grid-item-value"},[y.value])]));if(z.value===!0){const y=t["body-selection"],V=y!==void 0?y(c):[u($e,{modelValue:c.selected,color:e.color,dark:d.value,dense:e.dense,"onUpdate:modelValue":(x,N)=>{ee([c.key],[c.row],x,N)}})];b.unshift(u("div",{class:"q-table__grid-item-row"},V),u(dl,{dark:d.value}))}const h={class:["q-table__grid-item-card"+_.value,e.cardClass],style:e.cardStyle};if(e.cardStyleFn!==void 0&&(h.style=[h.style,e.cardStyleFn(c.row)]),e.cardClassFn!==void 0){const y=e.cardClassFn(c.row);y&&(h.class[0]+=` ${y}`)}return(e.onRowClick!==void 0||e.onRowDblclick!==void 0||e.onRowContextmenu!==void 0)&&(h.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(h.onClick=y=>{n("RowClick",y,c.row,c.pageIndex)}),e.onRowDblclick!==void 0&&(h.onDblclick=y=>{n("RowDblclick",y,c.row,c.pageIndex)}),e.onRowContextmenu!==void 0&&(h.onContextmenu=y=>{n("rowContextmenu",y,c.row,c.pageIndex)})),u("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(c.selected===!0?" q-table__grid-item--selected":"")},[u("div",h,b)])};return u("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},U.value.map((c,b)=>l(tt({key:m.value(c),row:c,pageIndex:b}))))}return Object.assign(g.proxy,{requestServerInteraction:B,setPagination:E,firstPage:Ae,prevPage:Ee,nextPage:Le,lastPage:Ue,isRowSelected:de,clearSelection:De,isRowExpanded:q,setExpanded:Z,sort:te,resetVirtualScroll:Ot,scrollTo:Bt,getCellValue:le}),cl(g.proxy,{filteredSortedRows:()=>ue.value,computedRows:()=>U.value,computedRowsNumber:()=>qe.value}),()=>{const l=[Ut()],c={ref:S,class:p.value};return e.grid===!0?l.push(zt()):Object.assign(c,{class:[c.class,e.cardClass],style:e.cardStyle}),l.push(Dt(),Nt()),e.loading===!0&&t.loading!==void 0&&l.push(t.loading()),u("div",c,l)}}}),la={name:"UsuariosPage",data(){return{users:[],user:{},userDialog:!1,loading:!1,actionUser:"",gestiones:[],filter:"",roles:["Usuario","Gerente","Productor","Produccion","Administrativo"],columns:[{name:"actions",label:"Acciones",align:"center"},{name:"name",label:"Nombre",align:"left",field:"name"},{name:"username",label:"Usuario",align:"left",field:"username"},{name:"avatar",label:"Avatar",align:"left",field:e=>e.avatar},{name:"role",label:"Rol",align:"left",field:"role"},{name:"permissions",label:"Permisos",align:"left",field:e=>(e.permissions||[]).map(t=>t.name).join(", ")}],permissions:[],dialogPermisos:!1,permFilter:"",cambioAvatarDialogo:!1,docentes:[]}},async mounted(){this.usersGet()},methods:{onFileChange(e){const t=e.target.files[0],n=new FormData;n.append("avatar",t),this.loading=!0,this.$axios.post(this.user.id+"/avatar",n,{headers:{"Content-Type":"multipart/form-data"}}).then(g=>{this.cambioAvatarDialogo=!1,this.$alert.success("Avatar actualizado"),this.usersGet()}).catch(g=>{this.$alert.error(g.response.data.message)}).finally(()=>{this.loading=!1})},cambiarAvatar(e){this.cambioAvatarDialogo=!0,this.user={...e}},userNew(){this.user={name:"",email:"",password:"",area_id:1,username:"",cargo:"",role:"Usuario"},this.actionUser="Nuevo",this.userDialog=!0},usersGet(){this.loading=!0,this.users=[],this.$axios.get("users").then(e=>{this.users=e.data}).catch(e=>{this.$alert.error(e.response.data.message)}).finally(()=>{this.loading=!1})},gestionGet(){this.loading=!0,this.$axios.get("gestiones").then(e=>{this.gestiones=e.data,this.loading=!1}).catch(e=>{this.$alert.error(e.response.data.message),this.loading=!1})},userPost(){this.loading=!0,this.$axios.post("users",this.user).then(e=>{this.userDialog=!1,this.$alert.success("User creado"),this.usersGet()}).catch(e=>{this.$alert.error(e.response.data.message)}).finally(()=>{this.loading=!1})},userPut(){this.loading=!0,this.$axios.put("users/"+this.user.id,this.user).then(e=>{this.usersGet(),this.userDialog=!1,this.$alert.success("User actualizado")}).catch(e=>{this.$alert.error(e.response.data.message)}).finally(()=>{this.loading=!1})},async permisosShow(e){this.user={...e},this.dialogPermisos=!0,this.loading=!0;try{const t=await this.$axios.get("permissions").then(g=>g.data),n=await this.$axios.get(`users/${e.id}/permissions`).then(g=>g.data);this.permissions=t.map(g=>({...g,checked:n.includes(g.id)}))}catch(t){this.$alert.error(t.response?.data?.message||"Error cargando permisos")}finally{this.loading=!1}},async permisosPost(){this.loading=!0;try{const e=this.permissions.filter(t=>t.checked).map(t=>t.id);await this.$axios.put(`users/${this.user.id}/permissions`,{permissions:e}),this.dialogPermisos=!1,this.$alert.success("Permisos actualizados"),this.usersGet()}catch(e){this.$alert.error(e.response?.data?.message||"No se pudo guardar")}finally{this.loading=!1}},userEditPassword(e){this.user={...e},this.$alert.dialogPrompt("Nueva contraseña","Ingrese la nueva contraseña","password").onOk(t=>{this.$axios.put("updatePassword/"+e.id,{password:t}).then(n=>{this.usersGet(),this.$alert.success("Contraseña actualizada de "+e.username)}).catch(n=>{this.$alert.error(n.response.data.message)})})},userEdit(e){this.user={...e},this.actionUser="Editar",this.userDialog=!0},userDelete(e){this.$alert.dialog("¿Desea eliminar el user?").onOk(()=>{this.loading=!0,this.$axios.delete("users/"+e).then(t=>{this.usersGet(),this.$alert.success("User eliminado")}).catch(t=>{this.$alert.error(t.response.data.message)}).finally(()=>{this.loading=!1})})}},computed:{filteredPermissions(){if(!this.permFilter)return this.permissions;const e=this.permFilter.toLowerCase();return this.permissions.filter(t=>t.name.toLowerCase().includes(e))}}},aa={class:"row items-center q-col-gutter-xs"},oa={class:"text-left"},na={class:"text-right"},ra={style:{position:"relative",top:"0",left:"0"}},sa=["src"],ia={class:"text-right"};function ua(e,t,n,g,o,d){return F(),A(Vl,{class:"q-pa-md"},{default:v(()=>[r(ta,{rows:o.users,columns:o.columns,dense:"","wrap-cells":"",flat:"",bordered:"","rows-per-page-options":[0],title:"Usuarios",filter:o.filter},{"top-right":v(()=>[r(D,{color:"positive",label:"Nuevo",onClick:d.userNew,"no-caps":"",icon:"add_circle_outline",loading:o.loading,class:"q-mr-sm"},null,8,["onClick","loading"]),r(D,{color:"primary",label:"Actualizar",onClick:d.usersGet,"no-caps":"",icon:"refresh",loading:o.loading},null,8,["onClick","loading"]),r(ne,{modelValue:o.filter,"onUpdate:modelValue":t[0]||(t[0]=a=>o.filter=a),label:"Buscar",dense:"",outlined:""},{append:v(()=>[r($,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":v(a=>[r(Re,{props:a},{default:v(()=>[r(Pl,{label:"Opciones","no-caps":"",size:"10px",dense:"",color:"primary"},{default:v(()=>[r(Ze,null,{default:v(()=>[me((F(),A(se,{clickable:"",onClick:i=>d.userEdit(a.row)},{default:v(()=>[r(L,{avatar:""},{default:v(()=>[r($,{name:"edit"})]),_:1}),r(L,null,{default:v(()=>[r(be,null,{default:v(()=>t[20]||(t[20]=[j("Editar")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[he]]),me((F(),A(se,{clickable:"",onClick:i=>d.userDelete(a.row.id)},{default:v(()=>[r(L,{avatar:""},{default:v(()=>[r($,{name:"delete"})]),_:1}),r(L,null,{default:v(()=>[r(be,null,{default:v(()=>t[21]||(t[21]=[j("Eliminar")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[he]]),me((F(),A(se,{clickable:"",onClick:i=>d.userEditPassword(a.row)},{default:v(()=>[r(L,{avatar:""},{default:v(()=>[r($,{name:"lock_reset"})]),_:1}),r(L,null,{default:v(()=>[r(be,null,{default:v(()=>t[22]||(t[22]=[j("Cambiar contraseña")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[he]]),me((F(),A(se,{clickable:"",onClick:i=>d.cambiarAvatar(a.row)},{default:v(()=>[r(L,{avatar:""},{default:v(()=>[r($,{name:"image"})]),_:1}),r(L,null,{default:v(()=>[r(be,null,{default:v(()=>t[23]||(t[23]=[j("Cambiar avatar")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[he]]),me((F(),A(se,{clickable:"",onClick:i=>d.permisosShow(a.row)},{default:v(()=>[r(L,{avatar:""},{default:v(()=>[r($,{name:"lock"})]),_:1}),r(L,null,{default:v(()=>[r(be,null,{default:v(()=>t[24]||(t[24]=[j("Permisos")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[he]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-role":v(a=>[r(Re,{props:a},{default:v(()=>[r(vt,{label:a.row.role,color:e.$filters.color(a.row.role),"text-color":"white",dense:"",size:"14px"},null,8,["label","color"])]),_:2},1032,["props"])]),"body-cell-avatar":v(a=>[r(Re,{props:a},{default:v(()=>[r(fl,{rounded:""},{default:v(()=>[a.row.avatar?(F(),A(_l,{key:0,src:`${e.$url}/../images/${a.row.avatar}`,width:"40px",height:"40px"},null,8,["src"])):(F(),A($,{key:1,name:"person",size:"40px"}))]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-permissions":v(a=>[r(Re,{props:a},{default:v(()=>[G("div",aa,[(F(!0),ge(He,null,Ie((a.row.permissions||[]).slice(0,3),(i,m)=>(F(),A(vt,{key:i.id,dense:"",color:"grey-3","text-color":"black",size:"12px",class:"q-mr-xs q-mb-xs"},{default:v(()=>[j(oe(i.name),1)]),_:2},1024))),128)),(a.row.permissions||[]).length>3?(F(),A(gt,{key:0,outline:"",color:"primary",class:"q-ml-xs"},{default:v(()=>[j(" +"+oe((a.row.permissions||[]).length-3)+" ",1),r(Fl,{anchor:"top middle",self:"bottom middle",offset:[0,8]},{default:v(()=>[G("div",oa,[(F(!0),ge(He,null,Ie(a.row.permissions,i=>(F(),ge("div",{key:i.id},"• "+oe(i.name),1))),128))])]),_:2},1024)]),_:2},1024)):ze("",!0),(a.row.permissions||[]).length?ze("",!0):(F(),A(gt,{key:1,color:"grey-5","text-color":"white",outline:""},{default:v(()=>t[25]||(t[25]=[j(" Sin permisos ")])),_:1}))])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"]),r(Ge,{modelValue:o.userDialog,"onUpdate:modelValue":t[9]||(t[9]=a=>o.userDialog=a),persistent:""},{default:v(()=>[r(We,{style:{width:"400px"}},{default:v(()=>[r(re,{class:"q-pb-none row items-center"},{default:v(()=>[G("div",null,oe(o.actionUser)+" user ",1),r(Ke),r(D,{icon:"close",flat:"",round:"",dense:"",onClick:t[1]||(t[1]=a=>o.userDialog=!1)})]),_:1}),r(re,{class:"q-pt-none"},{default:v(()=>[r(mt,{onSubmit:t[8]||(t[8]=a=>o.user.id?d.userPut():d.userPost())},{default:v(()=>[r(ne,{modelValue:o.user.name,"onUpdate:modelValue":t[2]||(t[2]=a=>o.user.name=a),label:"Nombre",dense:"",outlined:"",rules:[a=>!!a||"Campo requerido"]},null,8,["modelValue","rules"]),r(ne,{modelValue:o.user.username,"onUpdate:modelValue":t[3]||(t[3]=a=>o.user.username=a),label:"Usuario",dense:"",outlined:"",rules:[a=>!!a||"Campo requerido"]},null,8,["modelValue","rules"]),r(ne,{modelValue:o.user.email,"onUpdate:modelValue":t[4]||(t[4]=a=>o.user.email=a),label:"Email",dense:"",outlined:"",hint:""},null,8,["modelValue"]),o.user.id?ze("",!0):(F(),A(ne,{key:0,modelValue:o.user.password,"onUpdate:modelValue":t[5]||(t[5]=a=>o.user.password=a),label:"Contraseña",dense:"",outlined:"",rules:[a=>!!a||"Campo requerido"]},null,8,["modelValue","rules"])),r(qt,{modelValue:o.user.role,"onUpdate:modelValue":t[6]||(t[6]=a=>o.user.role=a),label:"Rol",dense:"",outlined:"",options:o.roles,rules:[a=>!!a||"Campo requerido"]},null,8,["modelValue","options","rules"]),G("div",na,[r(D,{color:"negative",label:"Cancelar",onClick:t[7]||(t[7]=a=>o.userDialog=!1),"no-caps":"",loading:o.loading},null,8,["loading"]),r(D,{color:"primary",label:"Guardar",type:"submit","no-caps":"",loading:o.loading,class:"q-ml-sm"},null,8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(Ge,{modelValue:o.cambioAvatarDialogo,"onUpdate:modelValue":t[15]||(t[15]=a=>o.cambioAvatarDialogo=a),persistent:""},{default:v(()=>[r(We,null,{default:v(()=>[r(re,{class:"q-pb-none row items-center text-bold"},{default:v(()=>[t[26]||(t[26]=j(" Cambiar avatar ")),r(Ke),r(D,{icon:"close",flat:"",round:"",dense:"",onClick:t[10]||(t[10]=a=>o.cambioAvatarDialogo=!1)})]),_:1}),r(re,{class:"q-pt-none"},{default:v(()=>[r(mt,{onSubmit:t[14]||(t[14]=a=>d.userPut())},{default:v(()=>[G("div",null,[G("div",ra,[r(D,{icon:"edit",size:"10px",class:"absolute q-mt-sm q-ml-sm",onClick:t[11]||(t[11]=a=>e.$refs.fileInput.click()),dense:"",outline:"",label:"Cambiar foto","no-caps":""})]),o.user.avatar?(F(),ge("img",{key:0,src:`${e.$url}/../images/${o.user.avatar}`,width:"300px",height:"300px"},null,8,sa)):(F(),A($,{key:1,name:"person",size:"100px"})),G("input",{ref:"fileInput",type:"file",style:{display:"none"},onChange:t[12]||(t[12]=(...a)=>d.onFileChange&&d.onFileChange(...a)),accept:"image/*"},null,544)]),G("div",ia,[r(D,{color:"negative",label:"Cancelar",onClick:t[13]||(t[13]=a=>o.cambioAvatarDialogo=!1),"no-caps":"",loading:o.loading},null,8,["loading"]),r(D,{color:"primary",label:"Guardar",type:"submit","no-caps":"",loading:o.loading,class:"q-ml-sm"},null,8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(Ge,{modelValue:o.dialogPermisos,"onUpdate:modelValue":t[19]||(t[19]=a=>o.dialogPermisos=a),persistent:""},{default:v(()=>[r(We,{style:{"min-width":"420px"}},{default:v(()=>[r(re,{class:"q-pb-none row items-center text-bold"},{default:v(()=>[j(" Permisos de "+oe(o.user.username)+" ",1),r(Ke),r(D,{icon:"close",flat:"",round:"",dense:"",onClick:t[16]||(t[16]=a=>o.dialogPermisos=!1)})]),_:1}),r(re,{class:"q-pt-none"},{default:v(()=>[r(ne,{modelValue:o.permFilter,"onUpdate:modelValue":t[17]||(t[17]=a=>o.permFilter=a),dense:"",outlined:"",placeholder:"Filtrar permisos...",class:"q-mb-sm"},{append:v(()=>[r($,{name:"search"})]),_:1},8,["modelValue"]),r(Ze,{dense:"",bordered:""},{default:v(()=>[(F(!0),ge(He,null,Ie(d.filteredPermissions,a=>(F(),A(se,{key:a.id},{default:v(()=>[r(L,null,{default:v(()=>[j(oe(a.name),1)]),_:2},1024),r(L,{side:""},{default:v(()=>[r(gl,{modelValue:a.checked,"onUpdate:modelValue":i=>a.checked=i},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),r(ml,{align:"right"},{default:v(()=>[r(D,{color:"negative",label:"Cancelar",onClick:t[18]||(t[18]=a=>o.dialogPermisos=!1),"no-caps":"",loading:o.loading},null,8,["loading"]),r(D,{color:"primary",label:"Guardar",onClick:d.permisosPost,"no-caps":"",loading:o.loading},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const _a=vl(la,[["render",ua]]);export{_a as default};
