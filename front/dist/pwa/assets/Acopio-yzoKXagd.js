import{_ as b,c as i,o as d,w as s,a as l,Q,e as u,b as e,a3 as g,a0 as r,aL as _,as as c,f as v,a1 as y,a2 as O,W as E,d as m,Z as p,a4 as S,t as n}from"./index-C8cOtXD5.js";import{Q as N}from"./QSelect-Btz7-Uhq.js";import{Q as V}from"./QForm-z2o1sA1w.js";import{Q as k,a as f,d as w}from"./format-9hC2cPcq.js";import{Q as A,a as B}from"./QList-DC0hlBnR.js";import{Q as D}from"./QMarkupTable-PSZmN6DJ.js";import{Q as F}from"./QPage-4pZAHheK.js";import{h}from"./moment-C5S46NFB.js";import"./selection-DN40pDtB.js";const I={name:"AcopioPage",data:function(){return{acopioCosechas:[],loading:!1,fechaInicio:h().startOf("month").format("YYYY-MM-DD"),fechaFin:h().endOf("month").format("YYYY-MM-DD"),estados:[{label:"BUENO",value:"BUENO"},{label:"EN PROCESO",value:"EN_PROCESO"},{label:"CANCELADO",value:"CANCELADO"}],estadoSeleccionado:null}},computed:{},methods:{buscarCosechas(){this.loading=!0,this.$axios.get("/acopio/cosechas",{params:{fecha_inicio:this.fechaInicio,fecha_fin:this.fechaFin,estado:this.estadoSeleccionado}}).then(t=>{this.acopioCosechas=t.data}).finally(()=>{this.loading=!1})}}},x={class:"row q-gutter-sm"},Y={class:"col-12 col-md-2"},M={class:"col-12 col-md-2"},P={class:"col-12 col-md-3"},U={class:"col-12 col-md-3 flex flex-center"},L={key:1,class:"text-center q-pa-md"};function j(t,o,R,$,q,C){return d(),i(F,{class:"q-pa-xs"},{default:s(()=>[l(Q,null,{default:s(()=>[l(u,null,{default:s(()=>o[3]||(o[3]=[e("div",{class:"text-h6"},"Acopio de Cosechas",-1)])),_:1}),l(g),l(u,null,{default:s(()=>[l(V,{onSubmit:_(C.buscarCosechas,["prevent"])},{default:s(()=>[e("div",x,[e("div",Y,[l(c,{modelValue:t.fechaInicio,"onUpdate:modelValue":o[0]||(o[0]=a=>t.fechaInicio=a),label:"Fecha Inicio",type:"date",dense:"",outlined:""},null,8,["modelValue"])]),e("div",M,[l(c,{modelValue:t.fechaFin,"onUpdate:modelValue":o[1]||(o[1]=a=>t.fechaFin=a),label:"Fecha Fin",type:"date",dense:"",outlined:""},null,8,["modelValue"])]),e("div",P,[l(N,{modelValue:t.estadoSeleccionado,"onUpdate:modelValue":o[2]||(o[2]=a=>t.estadoSeleccionado=a),options:t.estados,label:"Estado de Cosecha",dense:"",outlined:"",clearable:""},null,8,["modelValue","options"])]),e("div",U,[l(v,{loading:t.loading,label:"Buscar Cosechas",type:"submit",color:"primary",class:"full-width","no-caps":"",icon:"search"},null,8,["loading"])])])]),_:1},8,["onSubmit"]),t.acopioCosechas.length>0?(d(),i(D,{key:0,dense:"","wrap-cells":"",flat:"",bordered:""},{default:s(()=>[o[5]||(o[5]=e("thead",null,[e("tr",{class:"bg-primary text-white"},[e("th",null,"Opciones"),e("th",null,"Fecha Cosecha"),e("th",null,"Productor"),e("th",null,"Cantidad (kg)"),e("th",null,"Humedad (%)"),e("th",null,"Temperatura Almacenaje (°C)"),e("th",null,"Número Acta"),e("th",null,"Condiciones Almacenaje"),e("th",null,"Estado")])],-1)),e("tbody",null,[(d(!0),r(y,null,O(t.acopioCosechas,a=>(d(),r("tr",{key:a.id},[e("td",null,[l(A,{dense:"",label:"Opciones",color:"primary","no-caps":"",size:"10px"},{default:s(()=>[l(B,null,{default:s(()=>[E((d(),i(k,{clickable:"",onClick:()=>{}},{default:s(()=>[l(f,{avatar:""},{default:s(()=>[l(m,{name:"visibility"})]),_:1}),l(f,null,{default:s(()=>o[4]||(o[4]=[p("Ver Detalles")])),_:1})]),_:1})),[[S]])]),_:1})]),_:1})]),e("td",null,n(a.fecha_cosecha),1),e("td",null,n(a.apiario?.productor.nombre)+" "+n(a.apiario?.productor.apellidos),1),e("td",null,n(a.cantidad_kg),1),e("td",null,n(a.humedad),1),e("td",null,n(a.temperatura_almacenaje),1),e("td",null,n(a.num_acta),1),e("td",null,n(a.condiciones_almacenaje),1),e("td",null,[l(w,{color:a.estado==="BUENO"?"green":a.estado==="EN_PROCESO"?"orange":"red","text-color":"white",dense:"",size:"10px"},{default:s(()=>[p(n(a.estado.replace("_"," ")),1)]),_:2},1032,["color"])])]))),128))])]),_:1})):(d(),r("div",L,[l(m,{name:"info",size:"48px",color:"grey-5"}),o[6]||(o[6]=e("div",{class:"text-subtitle2 text-grey-5"},"No se encontraron cosechas.",-1))]))]),_:1})]),_:1})]),_:1})}const ee=b(I,[["render",j]]);export{ee as default};
