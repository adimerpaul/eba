import{Q as S}from"./QSpace-BakFp9oR.js";import{_ as R,c as p,o as c,w as a,b as e,a as l,f,aa as h,a9 as z,ab as U,ac as q,t as d,P as g,d as k,a8 as C,ad as O,h as M,Q as I,e as y,O as A,af as u,a7 as E,ah as B}from"./index-D1veR3Bv.js";import{Q as w,b as _,d as G}from"./format-awEb2v4z.js";import{Q as T}from"./QList-swL56IPN.js";import{Q as P}from"./QBtnDropdown-DZUy5qDE.js";import{Q as $}from"./QMarkupTable-ipDBAlFy.js";import{Q as D,a as v}from"./QSelect-6prwkjNH.js";import{Q as j}from"./QForm-D9M1quzy.js";import{C as b}from"./ClosePopup-CbG92mso.js";import{R as Z,y as H,u as J,v as K,i as W,L as F,m as X,a as Y,b as ee}from"./marker-shadow-G3KGTzTB.js";import{Q as oe}from"./QBadge-Bied9Mu-.js";const le={name:"ProductorCertificaciones",props:{productor:{type:Object,required:!0}},emits:["updated"],data(){return{loading:!1,saving:!1,dlg:{open:!1},form:this.emptyForm(),tipoOptions:["ORGANICO","COMERCIO_JUSTO","DENOMINACION_ORIGEN","BUENAS_PRACTICAS"]}},methods:{emptyForm(){return{id:null,productor_id:this.productor?.id||null,tipo_certificacion:null,organismo_certificador:"",fecha_emision:null,fecha_vencimiento:null,certificado_url:"",estado:"VIGENTE"}},chip(t){return t==="VIGENTE"?"green":t==="VENCIDO"?"red":t==="SUSPENDIDO"?"orange":"grey"},shortUrl(t){try{return t&&t.length>40?t.slice(0,40)+"…":t||"-"}catch{return t||"-"}},startCreate(){this.form=this.emptyForm(),this.form.productor_id=this.productor?.id||null,this.dlg.open=!0},startEdit(t){this.form={id:t.id,productor_id:this.productor?.id||t.productor_id,tipo_certificacion:t.tipo_certificacion||null,organismo_certificador:t.organismo_certificador||"",fecha_emision:t.fecha_emision||null,fecha_vencimiento:t.fecha_vencimiento||null,certificado_url:t.certificado_url||"",estado:t.estado||"VIGENTE"},this.dlg.open=!0},async submit(){if(this.productor?.id){this.saving=!0;try{const t={...this.form,productor_id:this.productor.id};t.id?await this.$axios.put(`certificaciones/${t.id}`,t):await this.$axios.post("certificaciones",t),this.$alert?.success?.(t.id?"Certificación actualizada":"Certificación creada"),this.dlg.open=!1,this.$emit("updated")}catch(t){this.$alert?.error?.(t.response?.data?.message||"No se pudo guardar")}finally{this.saving=!1}}},remove(t){this.$alert?.dialog?.("¿Eliminar certificación?")?.onOk(async()=>{try{await this.$axios.delete(`certificaciones/${t.id}`),this.$alert?.success?.("Eliminado"),this.$emit("updated")}catch(o){this.$alert?.error?.(o.response?.data?.message||"No se pudo eliminar")}})},async printPdf(t){this.$axios.get(`certificaciones/${t.id}/print`,{responseType:"blob"}).then(o=>{let m=`certificacion_${t.id}.pdf`;const x=o.headers["content-disposition"];if(x){const s=x.match(/filename="?([^"]+)"?/i);s&&s[1]&&(m=s[1])}const i=new Blob([o.data],{type:"application/pdf"}),r=document.createElement("a");r.href=URL.createObjectURL(i),r.download=m,document.body.appendChild(r),r.click(),URL.revokeObjectURL(r.href),document.body.removeChild(r)}).catch(o=>{this.$alert?.error?.(o.response?.data?.message||"No se pudo generar el PDF")})}}},te={class:"row items-center q-gutter-sm q-mb-sm"},ie=["href"],ae={key:1},se={key:0},ne={class:"text-h6"},re={class:"col-12 col-sm-4"},de={class:"col-12 col-sm-8"},ce={class:"col-6 col-sm-3"},ue={class:"col-6 col-sm-3"},me={class:"col-12 col-sm-3"},pe={class:"col-12"},fe={class:"col-12 text-right q-gutter-sm q-mt-sm"};function _e(t,o,m,x,i,r){return c(),p(y,null,{default:a(()=>[e("div",te,[o[7]||(o[7]=e("div",{class:"text-subtitle1"},"Certificaciones",-1)),l(S),l(f,{dense:"",color:"primary",icon:"add_circle",label:"Nueva",onClick:r.startCreate,disable:i.saving,"no-caps":""},null,8,["onClick","disable"])]),l($,{dense:""},{default:a(()=>[o[12]||(o[12]=e("thead",null,[e("tr",{class:"bg-grey-3"},[e("th",{class:"text-left"},"#"),e("th",{class:"text-left",style:{width:"120px"}},"Opciones"),e("th",{class:"text-left"},"Tipo"),e("th",{class:"text-left"},"Organismo"),e("th",{class:"text-left"},"Emisión"),e("th",{class:"text-left"},"Vencimiento"),e("th",{class:"text-left"},"Estado"),e("th",{class:"text-left"},"URL")])],-1)),e("tbody",null,[(c(!0),h(U,null,q(m.productor?.certificaciones||[],(s,n)=>(c(),h("tr",{key:s.id||n},[e("td",null,d(n+1),1),e("td",null,[l(P,{dense:"",label:"Opciones",color:"primary","no-caps":"",size:"10px"},{default:a(()=>[l(T,null,{default:a(()=>[g((c(),p(w,{clickable:"",onClick:N=>r.startEdit(s)},{default:a(()=>[l(_,{avatar:""},{default:a(()=>[l(k,{name:"edit"})]),_:1}),l(_,null,{default:a(()=>o[8]||(o[8]=[C("Editar")])),_:1})]),_:2},1032,["onClick"])),[[O],[b]]),g((c(),p(w,{clickable:"",onClick:N=>r.remove(s)},{default:a(()=>[l(_,{avatar:""},{default:a(()=>[l(k,{name:"delete",class:"text-negative"})]),_:1}),l(_,{class:"text-negative"},{default:a(()=>o[9]||(o[9]=[C("Eliminar")])),_:1})]),_:2},1032,["onClick"])),[[O],[b]]),g((c(),p(w,{clickable:"",onClick:N=>r.printPdf(s)},{default:a(()=>[l(_,{avatar:""},{default:a(()=>[l(k,{name:"picture_as_pdf"})]),_:1}),l(_,null,{default:a(()=>o[10]||(o[10]=[C("Imprimir")])),_:1})]),_:2},1032,["onClick"])),[[O],[b]])]),_:2},1024)]),_:2},1024)]),e("td",null,d(s.tipo_certificacion||"-"),1),e("td",null,d(s.organismo_certificador||"-"),1),e("td",null,d(s.fecha_emision||"-"),1),e("td",null,d(s.fecha_vencimiento||"-"),1),e("td",null,[l(G,{color:r.chip(s.estado),"text-color":"white",size:"xs",class:"text-bold"},{default:a(()=>[C(d(s.estado),1)]),_:2},1032,["color"])]),e("td",null,[s.certificado_url?(c(),h("a",{key:0,href:s.certificado_url,target:"_blank"},d(r.shortUrl(s.certificado_url)),9,ie)):(c(),h("span",ae,"-"))])]))),128)),!i.loading&&(m.productor?.certificaciones?.length||0)===0?(c(),h("tr",se,o[11]||(o[11]=[e("td",{colspan:"8",class:"text-center text-grey"},"Sin registros",-1)]))):z("",!0)])]),_:1}),l(M,{modelValue:i.dlg.open,"onUpdate:modelValue":o[6]||(o[6]=s=>i.dlg.open=s),persistent:""},{default:a(()=>[l(I,{style:{"min-width":"720px","max-width":"95vw"}},{default:a(()=>[l(y,{class:"row items-center q-gutter-sm"},{default:a(()=>[e("div",ne,d(i.form.id?"Editar certificación":"Nueva certificación"),1),l(S),g(l(f,{flat:"",round:"",dense:"",icon:"close"},null,512),[[b]])]),_:1}),l(A),l(y,null,{default:a(()=>[l(j,{onSubmit:r.submit,class:"row q-col-gutter-sm"},{default:a(()=>[e("div",re,[l(D,{modelValue:i.form.tipo_certificacion,"onUpdate:modelValue":o[0]||(o[0]=s=>i.form.tipo_certificacion=s),options:i.tipoOptions,dense:"",outlined:"",label:"Tipo",rules:[s=>!!s||"Requerido"]},null,8,["modelValue","options","rules"])]),e("div",de,[l(u,{modelValue:i.form.organismo_certificador,"onUpdate:modelValue":o[1]||(o[1]=s=>i.form.organismo_certificador=s),dense:"",outlined:"",label:"Organismo certificador"},null,8,["modelValue"])]),e("div",ce,[l(u,{modelValue:i.form.fecha_emision,"onUpdate:modelValue":o[2]||(o[2]=s=>i.form.fecha_emision=s),type:"date",dense:"",outlined:"",label:"Emisión"},null,8,["modelValue"])]),e("div",ue,[l(u,{modelValue:i.form.fecha_vencimiento,"onUpdate:modelValue":o[3]||(o[3]=s=>i.form.fecha_vencimiento=s),type:"date",dense:"",outlined:"",label:"Vencimiento"},null,8,["modelValue"])]),e("div",me,[l(D,{modelValue:i.form.estado,"onUpdate:modelValue":o[4]||(o[4]=s=>i.form.estado=s),options:["VIGENTE","VENCIDO","SUSPENDIDO"],dense:"",outlined:"",label:"Estado"},null,8,["modelValue"])]),e("div",pe,[l(u,{modelValue:i.form.certificado_url,"onUpdate:modelValue":o[5]||(o[5]=s=>i.form.certificado_url=s),dense:"",outlined:"",label:"URL certificado (opcional)"},null,8,["modelValue"])]),e("div",fe,[g(l(f,{flat:"",color:"grey",label:"Cancelar",disable:i.saving},null,8,["disable"]),[[b]]),l(f,{color:"primary",label:i.form.id?"Guardar cambios":"Crear",type:"submit",loading:i.saving},null,8,["label","loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const mt=R(le,[["render",_e]]);delete F.Icon.Default.prototype._getIconUrl;F.Icon.Default.mergeOptions({iconRetinaUrl:ee,iconUrl:Y,shadowUrl:X});const he={name:"ApiarioMap",components:{LMap:W,LTileLayer:K,LMarker:J,LPopup:H,LControlLayers:Z},props:{modelValue:{type:Object,default:()=>({latitud:null,longitud:null})},center:{type:Array,default:()=>[-16.5,-68.15]},zoomInit:{type:Number,default:14}},emits:["update:modelValue"],data(){return{zoom:this.zoomInit,local:{...this.modelValue},mapOptions:{zoomControl:!0,attributionControl:!1,zoomAnimation:!1,fadeAnimation:!1,markerZoomAnimation:!1}}},computed:{hasLatLng(){const{latitud:t,longitud:o}=this.local;return t!=null&&o!=null&&isFinite(t)&&isFinite(o)},mapCenter(){return this.hasLatLng?[Number(this.local.latitud),Number(this.local.longitud)]:this.center},mapObj(){return this.$refs.map?.leafletObject||null}},watch:{modelValue:{deep:!0,handler(t){t&&(t.latitud!==this.local.latitud||t.longitud!==this.local.longitud)&&(this.local={...t},this.$nextTick(()=>this.refresh()))}},local:{deep:!0,handler(t){const o={...this.modelValue,latitud:t.latitud??null,longitud:t.longitud??null};this.$emit("update:modelValue",o)}}},mounted(){this.$nextTick(()=>this.refresh())},methods:{fix(t){const o=Number(t);return isFinite(o)?o.toFixed(6):"-"},refresh(){const t=this.mapObj;t&&setTimeout(()=>{t.invalidateSize(),this.hasLatLng&&t.setView([Number(this.local.latitud),Number(this.local.longitud)],Math.max(t.getZoom()||this.zoom,15),{animate:!1})},60)},onMapClick(t){const{lat:o,lng:m}=t.latlng||{};o==null||m==null||(this.local.latitud=Number(o.toFixed(7)),this.local.longitud=Number(m.toFixed(7)),this.flyToLatLng())},onDragEnd(t){const o=t?.target?.getLatLng?.();o&&(this.local.latitud=Number(o.lat.toFixed(7)),this.local.longitud=Number(o.lng.toFixed(7)),this.flyToLatLng())},flyToLatLng(){const t=this.mapObj;!t||!this.hasLatLng||t.setView([Number(this.local.latitud),Number(this.local.longitud)],Math.max(t.getZoom()||this.zoom,16),{animate:!1})},locateMe(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{this.local.latitud=Number(t.coords.latitude.toFixed(7)),this.local.longitud=Number(t.coords.longitude.toFixed(7)),this.$nextTick(()=>this.flyToLatLng())})}}},ge={class:"map-wrapper"},be={class:"row items-center q-col-gutter-sm q-mb-sm"},ye={class:"col-6 col-sm-3"},ve={class:"col-6 col-sm-3"},Ce={class:"col-6 col-sm-3"},xe={class:"col-6 col-sm-3"};function Ae(t,o,m,x,i,r){const s=E("l-control-layers"),n=E("l-tile-layer"),N=E("l-popup"),L=E("l-marker"),Q=E("l-map");return c(),h("div",ge,[e("div",be,[e("div",ye,[l(u,{modelValue:i.local.latitud,"onUpdate:modelValue":o[0]||(o[0]=V=>i.local.latitud=V),modelModifiers:{number:!0},dense:"",outlined:"",label:"Latitud"},null,8,["modelValue"])]),e("div",ve,[l(u,{modelValue:i.local.longitud,"onUpdate:modelValue":o[1]||(o[1]=V=>i.local.longitud=V),modelModifiers:{number:!0},dense:"",outlined:"",label:"Longitud"},null,8,["modelValue"])]),e("div",Ce,[l(f,{dense:"","no-caps":"",color:"primary",icon:"place",label:"Ir a lat/lng",onClick:r.flyToLatLng,style:{width:"100%"}},null,8,["onClick"])]),e("div",xe,[l(f,{dense:"","no-caps":"",color:"secondary",icon:"my_location",label:"Mi ubicación",onClick:r.locateMe,style:{width:"100%"}},null,8,["onClick"])])]),l(Q,{ref:"map",zoom:i.zoom,center:r.mapCenter,options:i.mapOptions,style:{height:"360px","border-radius":"8px",overflow:"hidden"},onClick:r.onMapClick},{default:a(()=>[l(s,{position:"topright"}),l(n,{"layer-type":"base",name:"OpenStreetMap",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png","max-zoom":19,visible:!0}),l(n,{"layer-type":"base",name:"Google Calle",url:"https://mt1.google.com/vt/lyrs=r&x={x}&y={y}&z={z}","max-zoom":21,visible:!1}),l(n,{"layer-type":"base",name:"Google Satélite",url:"https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","max-zoom":21,visible:!1}),l(n,{"layer-type":"base",name:"Google Híbrido",url:"https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}","max-zoom":21,visible:!1}),r.hasLatLng?(c(),p(L,{key:0,"lat-lng":[Number(i.local.latitud),Number(i.local.longitud)],draggable:!0,onDragend:r.onDragEnd},{default:a(()=>[l(N,null,{default:a(()=>[e("div",null,[C("Lat: "+d(r.fix(i.local.latitud)),1),o[2]||(o[2]=e("br",null,null,-1)),C("Lng: "+d(r.fix(i.local.longitud)),1)])]),_:1})]),_:1},8,["lat-lng","onDragend"])):z("",!0)]),_:1},8,["zoom","center","options","onClick"])])}const Ve=R(he,[["render",Ae],["__scopeId","data-v-253e10b2"]]),ke={name:"ProductorApiarios",components:{ApiarioMap:Ve},props:{productor:{type:Object,required:!0}},emits:["updated"],data(){return{loading:!1,saving:!1,list:[],dlgApiario:{open:!1},formApiario:this.emptyApiario(),dlgColmena:{open:!1},currentApiario:null,colmenas:[],colLoading:!1,formColmena:this.emptyColmena(),tipoMielOptions:[]}},mounted(){this.hydrateFromProductor()},watch:{productor(){this.hydrateFromProductor()}},methods:{hydrateFromProductor(){this.productor?.apiarios?this.list=this.productor.apiarios:this.fetchApiarios()},async fetchApiarios(){this.loading=!0;try{const{data:t}=await this.$axios.get("apiarios",{params:{productor_id:this.productor.id,paginate:!1}});this.list=Array.isArray(t)?t:t?.data||[]}catch(t){this.list=[],this.$alert?.error?.(t.response?.data?.message||"No se pudo cargar apiarios")}finally{this.loading=!1}},emptyApiario(){return{id:null,productor_id:this.productor?.id||null,municipio_id:null,nombre_cip:"",latitud:null,longitud:null,altitud:null,lugar_apiario:"",numero_colmenas_runsa:null,numero_colmenas_prod:0,seleccion:0,rend_programa_nal:0,organizacion_id:0,fecha_instalacion:null,estado:"ACTIVO",fase:"",coordenada:""}},startCreate(){this.formApiario=this.emptyApiario(),this.dlgApiario.open=!0},startEdit(t){this.formApiario={...this.emptyApiario(),...t,productor_id:this.productor?.id||t.productor_id},this.dlgApiario.open=!0},onApiarioDialogShow(){this.$nextTick(()=>this.$refs.apiarioMap?.refresh())},async saveApiario(){this.saving=!0;try{const t={...this.formApiario,productor_id:this.productor.id};t.id?await this.$axios.put(`apiarios/${t.id}`,t):await this.$axios.post("apiarios",t),this.$alert?.success?.(t.id?"Apiario actualizado":"Apiario creado"),this.dlgApiario.open=!1,this.$emit("updated"),await this.fetchApiarios()}catch(t){this.$alert?.error?.(t.response?.data?.message||"No se pudo guardar apiario")}finally{this.saving=!1}},emptyColmena(){return{id:null,apiario_id:null,tipo_miel_id:null,codigo_colmena:"",tipo_colmena:"",fecha_instalacion:null,reina_fecha_nacimiento:null,reina_procedencia:"",estado:"ACTIVA"}},async openColmenas(t){this.currentApiario=t,this.dlgColmena.open=!0,await this.fetchTipoMiel(),await this.fetchColmenas()},async removeApiario(t){this.$alert?.dialog?.("¿Eliminar apiario?")?.onOk(async()=>{try{await this.$axios.delete(`apiarios/${t.id}`),this.$alert?.success?.("Apiario eliminado"),await this.fetchApiarios()}catch(o){this.$alert?.error?.(o.response?.data?.message||"No se pudo eliminar apiario")}})},async fetchTipoMiel(){try{const{data:t}=await this.$axios.get("tipo-miel");this.tipoMielOptions=Array.isArray(t)?t:t?.data||[]}catch{this.tipoMielOptions=[]}},async fetchColmenas(){if(this.currentApiario?.id){this.colLoading=!0;try{const{data:t}=await this.$axios.get("colmenas",{params:{apiario_id:this.currentApiario.id,paginate:!1}});this.colmenas=Array.isArray(t)?t:t?.data||[]}catch(t){this.colmenas=[],this.$alert?.error?.(t.response?.data?.message||"No se pudieron cargar colmenas")}finally{this.colLoading=!1}}},startCreateColmena(){this.formColmena=this.emptyColmena(),this.formColmena.apiario_id=this.currentApiario?.id||null},startEditColmena(t){this.formColmena={...this.emptyColmena(),...t,apiario_id:this.currentApiario?.id||t.apiario_id}},resetColmena(){this.startCreateColmena()},async saveColmena(){this.saving=!0;try{const t={...this.formColmena,apiario_id:this.currentApiario.id};t.id?await this.$axios.put(`colmenas/${t.id}`,t):await this.$axios.post("colmenas",t),this.$alert?.success?.(t.id?"Colmena actualizada":"Colmena creada"),await this.fetchColmenas(),this.$emit("updated")}catch(t){this.$alert?.error?.(t.response?.data?.message||"No se pudo guardar colmena")}finally{this.saving=!1}},removeColmena(t){this.$alert?.dialog?.("¿Eliminar colmena?")?.onOk(async()=>{try{await this.$axios.delete(`colmenas/${t.id}`),this.$alert?.success?.("Eliminado"),await this.fetchColmenas(),this.$emit("updated")}catch(o){this.$alert?.error?.(o.response?.data?.message||"No se pudo eliminar")}})}}},we={class:"row items-center q-gutter-sm q-mb-sm"},Ne={key:0},Ee={key:1},ze={key:0},Oe={class:"text-h6"},Ie={class:"col-12 col-sm-4"},Le={class:"col-12 col-sm-8"},Ue={class:"col-6 col-sm-2"},qe={class:"col-6 col-sm-2"},Re={class:"col-12 col-sm-2"},Me={class:"col-12"},Te={class:"col-6 col-sm-3"},Pe={class:"col-6 col-sm-3"},$e={class:"col-6 col-sm-3"},Se={class:"col-6 col-sm-3"},De={class:"col-12 text-right q-gutter-sm q-mt-sm"},Fe={class:"text-h6"},Qe={key:0},Ge={class:"text-subtitle2 q-mb-sm"},je={class:"col-12 col-sm-3"},Be={class:"col-12 col-sm-3"},Ze={class:"col-12 col-sm-3"},He={class:"col-12 col-sm-3"},Je={class:"col-12 col-sm-4"},Ke={class:"col-12 col-sm-4"},We={class:"col-12 col-sm-4"},Xe={class:"col-12 text-right q-gutter-sm"};function Ye(t,o,m,x,i,r){const s=E("ApiarioMap");return c(),p(y,null,{default:a(()=>[e("div",we,[o[19]||(o[19]=e("div",{class:"text-subtitle1"},"Apiarios",-1)),l(S),l(f,{dense:"",color:"primary",icon:"add_circle",label:"Nuevo","no-caps":"",onClick:r.startCreate,disable:i.saving},null,8,["onClick","disable"])]),l($,{dense:""},{default:a(()=>[o[24]||(o[24]=e("thead",null,[e("tr",{class:"bg-grey-3"},[e("th",{class:"text-left"},"#"),e("th",{class:"text-left"},"Opciones"),e("th",{class:"text-left"},"Nombre/CIP"),e("th",{class:"text-left"},"Lugar"),e("th",{class:"text-left"},"Ubicación"),e("th",{class:"text-left"},"Colmenas"),e("th",{class:"text-left"},"Estado"),e("th",{class:"text-left"},"Instalación")])],-1)),e("tbody",null,[(c(!0),h(U,null,q(i.list,(n,N)=>(c(),h("tr",{key:n.id},[e("td",null,d(N+1),1),e("td",null,[l(P,{dense:"",label:"Opciones","no-caps":"",color:"primary",size:"10px"},{default:a(()=>[l(T,null,{default:a(()=>[g((c(),p(w,{clickable:"",onClick:L=>r.startEdit(n)},{default:a(()=>[l(_,{avatar:""},{default:a(()=>[l(k,{name:"edit"})]),_:1}),l(_,null,{default:a(()=>o[20]||(o[20]=[C("Editar")])),_:1})]),_:2},1032,["onClick"])),[[b]]),g((c(),p(w,{clickable:"",onClick:L=>r.openColmenas(n)},{default:a(()=>[l(_,{avatar:""},{default:a(()=>[l(k,{name:"hive"})]),_:1}),l(_,null,{default:a(()=>o[21]||(o[21]=[C("Colmenas")])),_:1})]),_:2},1032,["onClick"])),[[b]]),g((c(),p(w,{clickable:"",onClick:L=>r.removeApiario(n)},{default:a(()=>[l(_,{avatar:""},{default:a(()=>[l(k,{class:"text-negative",name:"delete"})]),_:1}),l(_,{class:"text-negative"},{default:a(()=>o[22]||(o[22]=[C("Eliminar")])),_:1})]),_:2},1032,["onClick"])),[[b]])]),_:2},1024)]),_:2},1024)]),e("td",null,d(n.nombre_cip||"-"),1),e("td",null,d(n.lugar_apiario||"-"),1),e("td",null,[n.latitud&&n.longitud?(c(),h("span",Ne,d(n.latitud.toFixed?n.latitud.toFixed(6):n.latitud)+", "+d(n.longitud.toFixed?n.longitud.toFixed(6):n.longitud),1)):(c(),h("span",Ee,"-"))]),e("td",null,d((n.colmenas?n.colmenas.length:n.colmenas_count)??0),1),e("td",null,[l(G,{color:n.estado==="ACTIVO"?"green":"grey","text-color":"white",size:"xs",class:"text-bold"},{default:a(()=>[C(d(n.estado),1)]),_:2},1032,["color"])]),e("td",null,d(n.fecha_instalacion||"-"),1)]))),128)),!i.loading&&i.list.length===0?(c(),h("tr",ze,o[23]||(o[23]=[e("td",{colspan:"8",class:"text-center text-grey"},"Sin registros",-1)]))):z("",!0)])]),_:1}),l(M,{modelValue:i.dlgApiario.open,"onUpdate:modelValue":o[10]||(o[10]=n=>i.dlgApiario.open=n),persistent:"","transition-show":"none","transition-hide":"none",onShow:r.onApiarioDialogShow},{default:a(()=>[l(I,{style:{"min-width":"900px","max-width":"95vw"}},{default:a(()=>[l(y,{class:"row items-center q-gutter-sm"},{default:a(()=>[e("div",Oe,d(i.formApiario.id?"Editar apiario":"Nuevo apiario"),1),l(S),g(l(f,{flat:"",round:"",dense:"",icon:"close"},null,512),[[b]])]),_:1}),l(A),l(y,null,{default:a(()=>[l(j,{onSubmit:r.saveApiario,class:"row q-col-gutter-sm"},{default:a(()=>[e("div",Ie,[l(u,{modelValue:i.formApiario.nombre_cip,"onUpdate:modelValue":o[0]||(o[0]=n=>i.formApiario.nombre_cip=n),label:"Nombre / CIP",dense:"",outlined:""},null,8,["modelValue"])]),e("div",Le,[l(u,{modelValue:i.formApiario.lugar_apiario,"onUpdate:modelValue":o[1]||(o[1]=n=>i.formApiario.lugar_apiario=n),label:"Lugar del apiario",dense:"",outlined:""},null,8,["modelValue"])]),e("div",Ue,[l(u,{modelValue:i.formApiario.altitud,"onUpdate:modelValue":o[2]||(o[2]=n=>i.formApiario.altitud=n),modelModifiers:{number:!0},label:"Altitud (msnm)",dense:"",outlined:""},null,8,["modelValue"])]),e("div",qe,[l(u,{modelValue:i.formApiario.fecha_instalacion,"onUpdate:modelValue":o[3]||(o[3]=n=>i.formApiario.fecha_instalacion=n),type:"date",label:"Instalación",dense:"",outlined:""},null,8,["modelValue"])]),e("div",Re,[l(D,{modelValue:i.formApiario.estado,"onUpdate:modelValue":o[4]||(o[4]=n=>i.formApiario.estado=n),options:["ACTIVO","INACTIVO"],label:"Estado",dense:"",outlined:""},null,8,["modelValue"])]),e("div",Me,[l(s,{ref:"apiarioMap",modelValue:i.formApiario,"onUpdate:modelValue":o[5]||(o[5]=n=>i.formApiario=n),center:[-16.5,-68.15],"zoom-init":14},null,8,["modelValue"])]),e("div",Te,[l(u,{modelValue:i.formApiario.numero_colmenas_runsa,"onUpdate:modelValue":o[6]||(o[6]=n=>i.formApiario.numero_colmenas_runsa=n),modelModifiers:{number:!0},type:"number",label:"Colmenas RUNSA",dense:"",outlined:""},null,8,["modelValue"])]),e("div",Pe,[l(u,{modelValue:i.formApiario.numero_colmenas_prod,"onUpdate:modelValue":o[7]||(o[7]=n=>i.formApiario.numero_colmenas_prod=n),modelModifiers:{number:!0},type:"number",label:"Colmenas PROD.",dense:"",outlined:""},null,8,["modelValue"])]),e("div",$e,[l(u,{modelValue:i.formApiario.rend_programa_nal,"onUpdate:modelValue":o[8]||(o[8]=n=>i.formApiario.rend_programa_nal=n),modelModifiers:{number:!0},type:"number",step:"0.01",label:"Rend. prog. nal",dense:"",outlined:""},null,8,["modelValue"])]),e("div",Se,[l(u,{modelValue:i.formApiario.seleccion,"onUpdate:modelValue":o[9]||(o[9]=n=>i.formApiario.seleccion=n),modelModifiers:{number:!0},type:"number",label:"Selección",dense:"",outlined:""},null,8,["modelValue"])]),e("div",De,[g(l(f,{flat:"",color:"grey",label:"Cancelar",disable:i.saving},null,8,["disable"]),[[b]]),l(f,{color:"primary",label:i.formApiario.id?"Guardar cambios":"Crear",type:"submit",loading:i.saving},null,8,["label","loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue","onShow"]),l(M,{modelValue:i.dlgColmena.open,"onUpdate:modelValue":o[18]||(o[18]=n=>i.dlgColmena.open=n),persistent:"","transition-show":"none","transition-hide":"none"},{default:a(()=>[l(I,{style:{"min-width":"900px","max-width":"95vw"}},{default:a(()=>[l(y,{class:"row items-center q-gutter-sm"},{default:a(()=>[e("div",Fe,"Colmenas — "+d(i.currentApiario?.nombre_cip||"Apiario #"+i.currentApiario?.id),1),l(S),l(f,{dense:"",color:"primary",icon:"add_circle",label:"Nueva colmena","no-caps":"",onClick:r.startCreateColmena},null,8,["onClick"]),g(l(f,{flat:"",round:"",dense:"",icon:"close"},null,512),[[b]])]),_:1}),l(A),l(y,null,{default:a(()=>[l($,{dense:""},{default:a(()=>[o[28]||(o[28]=e("thead",null,[e("tr",{class:"bg-grey-3"},[e("th",null,"#"),e("th",null,"Opc."),e("th",null,"Código"),e("th",null,"Tipo"),e("th",null,"Tipo miel"),e("th",null,"Instalación"),e("th",null,"Reina nacimiento"),e("th",null,"Estado")])],-1)),e("tbody",null,[(c(!0),h(U,null,q(i.colmenas,(n,N)=>(c(),h("tr",{key:n.id||N},[e("td",null,d(N+1),1),e("td",null,[l(P,{dense:"","no-caps":"",size:"10px",label:"Opciones",color:"primary"},{default:a(()=>[l(T,null,{default:a(()=>[g((c(),p(w,{clickable:"",onClick:L=>r.startEditColmena(n)},{default:a(()=>[l(_,{avatar:""},{default:a(()=>[l(k,{name:"edit"})]),_:1}),l(_,null,{default:a(()=>o[25]||(o[25]=[C("Editar")])),_:1})]),_:2},1032,["onClick"])),[[b]]),g((c(),p(w,{clickable:"",onClick:L=>r.removeColmena(n)},{default:a(()=>[l(_,{avatar:""},{default:a(()=>[l(k,{class:"text-negative",name:"delete"})]),_:1}),l(_,{class:"text-negative"},{default:a(()=>o[26]||(o[26]=[C("Eliminar")])),_:1})]),_:2},1032,["onClick"])),[[b]])]),_:2},1024)]),_:2},1024)]),e("td",null,d(n.codigo_colmena||"-"),1),e("td",null,d(n.tipo_colmena||"-"),1),e("td",null,d(n.tipo_miel?.tipo_miel||n.tipoMiel?.tipo_miel||"-"),1),e("td",null,d(n.fecha_instalacion||"-"),1),e("td",null,d(n.reina_fecha_nacimiento||"-"),1),e("td",null,[l(G,{color:n.estado==="ACTIVA"?"green":"grey","text-color":"white",size:"xs"},{default:a(()=>[C(d(n.estado),1)]),_:2},1032,["color"])])]))),128)),!i.colLoading&&i.colmenas.length===0?(c(),h("tr",Qe,o[27]||(o[27]=[e("td",{colspan:"8",class:"text-center text-grey"},"Sin colmenas",-1)]))):z("",!0)])]),_:1}),l(A,{class:"q-my-md"}),e("div",Ge,d(i.formColmena.id?"Editar colmena":"Nueva colmena"),1),l(j,{onSubmit:r.saveColmena,class:"row q-col-gutter-sm"},{default:a(()=>[e("div",je,[l(u,{modelValue:i.formColmena.codigo_colmena,"onUpdate:modelValue":o[11]||(o[11]=n=>i.formColmena.codigo_colmena=n),dense:"",outlined:"",label:"Código"},null,8,["modelValue"])]),e("div",Be,[l(u,{modelValue:i.formColmena.tipo_colmena,"onUpdate:modelValue":o[12]||(o[12]=n=>i.formColmena.tipo_colmena=n),dense:"",outlined:"",label:"Tipo colmena"},null,8,["modelValue"])]),e("div",Ze,[l(D,{modelValue:i.formColmena.tipo_miel_id,"onUpdate:modelValue":o[13]||(o[13]=n=>i.formColmena.tipo_miel_id=n),options:i.tipoMielOptions,"option-value":"id","option-label":"tipo_miel","emit-value":"","map-options":"",dense:"",outlined:"",label:"Tipo de miel"},null,8,["modelValue","options"])]),e("div",He,[l(u,{modelValue:i.formColmena.fecha_instalacion,"onUpdate:modelValue":o[14]||(o[14]=n=>i.formColmena.fecha_instalacion=n),type:"date",dense:"",outlined:"",label:"Instalación"},null,8,["modelValue"])]),e("div",Je,[l(u,{modelValue:i.formColmena.reina_fecha_nacimiento,"onUpdate:modelValue":o[15]||(o[15]=n=>i.formColmena.reina_fecha_nacimiento=n),type:"date",dense:"",outlined:"",label:"Reina: nacimiento"},null,8,["modelValue"])]),e("div",Ke,[l(u,{modelValue:i.formColmena.reina_procedencia,"onUpdate:modelValue":o[16]||(o[16]=n=>i.formColmena.reina_procedencia=n),dense:"",outlined:"",label:"Reina: procedencia"},null,8,["modelValue"])]),e("div",We,[l(D,{modelValue:i.formColmena.estado,"onUpdate:modelValue":o[17]||(o[17]=n=>i.formColmena.estado=n),options:["ACTIVA","INACTIVA"],dense:"",outlined:"",label:"Estado"},null,8,["modelValue"])]),e("div",Xe,[l(f,{flat:"",color:"grey",label:"Limpiar",onClick:r.resetColmena,disable:i.saving},null,8,["onClick","disable"]),l(f,{color:"primary",label:i.formColmena.id?"Guardar cambios":"Agregar colmena",type:"submit",loading:i.saving},null,8,["label","loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const pt=R(ke,[["render",Ye],["__scopeId","data-v-08f4bdb1"]]);delete F.Icon.Default.prototype._getIconUrl;F.Icon.Default.mergeOptions({iconRetinaUrl:ee,iconUrl:Y,shadowUrl:X});const eo={name:"ProductorMapa",components:{LMap:W,LTileLayer:K,LMarker:J,LPopup:H,LControlLayers:Z},props:{productor:{type:Object,required:!0},defaultCenter:{type:Array,default:()=>[-16.29,-63.59]},defaultZoom:{type:Number,default:6}},data(){return{zoom:this.defaultZoom,initialCenter:this.defaultCenter,mapOptions:{zoomControl:!0,attributionControl:!1,zoomAnimation:!1,fadeAnimation:!1,markerZoomAnimation:!1}}},computed:{mapObj(){return this.$refs.map?.leafletObject||null},apiariosConLatLng(){return(Array.isArray(this.productor?.apiarios)?this.productor.apiarios:[]).map(o=>{const m=Number(o.latitud),x=Number(o.longitud);return isFinite(m)&&isFinite(x)?{...o,lat:m,lng:x}:null}).filter(Boolean)}},watch:{productor:{deep:!0,handler(){this.$nextTick(()=>this.fitToMarkers())}}},mounted(){this.$nextTick(()=>this.fitToMarkers())},methods:{refresh(){const t=this.mapObj;t&&setTimeout(()=>{t.invalidateSize(),this.fitToMarkers(!0)},60)},fitToMarkers(t=!1){const o=this.mapObj;if(!o)return;const m=this.apiariosConLatLng.map(i=>[i.lat,i.lng]);if(m.length===0){o.setView(this.defaultCenter,this.defaultZoom,{animate:!1});return}if(m.length===1){const i=t?o.getZoom()||this.defaultZoom:Math.max(o.getZoom()||this.defaultZoom,15);o.setView(m[0],i,{animate:!1});return}const x=F.latLngBounds(m);o.fitBounds(x.pad(.2),{animate:!1})}}},oo={style:{height:"580px","border-radius":"8px",overflow:"hidden"}},lo={style:{"min-width":"180px"}},to={class:"text-bold"},io={class:"text-grey-7",style:{"font-size":"12px"}},ao={key:0,class:"q-mt-xs"};function so(t,o,m,x,i,r){const s=E("l-control-layers"),n=E("l-tile-layer"),N=E("l-popup"),L=E("l-marker"),Q=E("l-map");return c(),p(y,{class:"q-pa-none"},{default:a(()=>[e("div",oo,[l(Q,{ref:"map",zoom:i.zoom,center:i.initialCenter,options:i.mapOptions,style:{height:"100%",width:"100%"}},{default:a(()=>[l(s,{position:"topright"}),l(n,{"layer-type":"base",name:"OpenStreetMap",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png","max-zoom":19,visible:!1}),l(n,{"layer-type":"base",name:"Google Calle",url:"https://mt1.google.com/vt/lyrs=r&x={x}&y={y}&z={z}","max-zoom":21,visible:!1}),l(n,{"layer-type":"base",name:"Google Satélite",url:"https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","max-zoom":21,visible:!1}),l(n,{"layer-type":"base",name:"Google Híbrido",url:"https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}","max-zoom":21,visible:!0}),(c(!0),h(U,null,q(r.apiariosConLatLng,V=>(c(),p(L,{key:V.id,"lat-lng":[V.lat,V.lng]},{default:a(()=>[l(N,null,{default:a(()=>[e("div",lo,[e("div",to,d(V.nombre_cip||"Apiario #"+V.id),1),e("div",null,d(V.lugar_apiario||"-"),1),e("div",io,[C(" Lat: "+d(V.lat.toFixed(6)),1),o[0]||(o[0]=e("br",null,null,-1)),C(" Lng: "+d(V.lng.toFixed(6)),1)]),V.estado?(c(),h("div",ao,[o[1]||(o[1]=C(" Estado: ")),l(oe,{color:V.estado==="ACTIVO"?"green":"grey","text-color":"white",rounded:""},{default:a(()=>[C(d(V.estado),1)]),_:2},1032,["color"])])):z("",!0)])]),_:2},1024)]),_:2},1032,["lat-lng"]))),128))]),_:1},8,["zoom","center","options"])])]),_:1})}const ft=R(eo,[["render",so],["__scopeId","data-v-9985e018"]]),no={name:"PlagasFormulario",props:{cosecha:{type:Object,required:!0},readOnly:{type:Boolean,default:!1}},data(){return{loading:!1,saving:!1,rows:[],dlg:{open:!1,modo:"crear",id:null},form:{acopio_cosecha_id:null,fecha:null,numero_colmenas_apiario:"",nombre_plaga:"",plaga_presente:"",daño_visible_apiario:"",medidas_control_celdilla:"",observaciones:""}}},computed:{datosEncabezado(){if(!this.cosecha?.apiario?.productor)return null;const t=this.cosecha.apiario.productor,o=t.municipio||{},m=o.provincia||{},x=o.departamento||{},i=this.cosecha.apiario||{};return{registro_sanitario:t.runsa||t.codigo_runsa||"N/A",departamento:x.nombre_departamento||"N/A",nombre_apicultor:`${t.nombre||""} ${t.apellidos||""}`.trim()||t.nombre_apellido||"N/A",nombre_apiario:i.nombre_apiario||i.codigo_apiario||"N/A",provincia:m.nombre_provincia||"N/A",municipio:o.nombre_municipio||"N/A",georeferenciacion:`${i.latitud||""}, ${i.longitud||""}`.trim().replace(/^,\s*|,\s*$/g,"")||"N/A",localidad:t.direccion||"N/A"}}},mounted(){this.fetchRows()},methods:{resetForm(){const t=new Date().toISOString().split("T")[0],o=this.cosecha?.apiario||{},m=o.nombre_apiario||o.codigo_apiario||"",x=o.numero_colmenas||o.cant_colmenas||"";this.form={acopio_cosecha_id:this.cosecha?.id||null,fecha:t,numero_colmenas_apiario:x,nombre_plaga:m,plaga_presente:"",daño_visible_apiario:"",medidas_control_celdilla:"",observaciones:""}},async fetchRows(){try{this.loading=!0;const{data:t}=await this.$axios.get("/plagas",{params:{cosecha_id:this.cosecha?.id}});this.rows=Array.isArray(t)?t:t?.data||[]}catch{this.$q.notify({type:"negative",message:"No se pudieron cargar los registros"})}finally{this.loading=!1}},onNuevo(){this.dlg.modo="crear",this.dlg.id=null,this.resetForm(),this.form.acopio_cosecha_id=this.cosecha?.id||null,this.dlg.open=!0},onEditar(t){this.dlg.modo="editar",this.dlg.id=t.id,this.form={...t,acopio_cosecha_id:this.cosecha?.id||t.acopio_cosecha_id},this.dlg.open=!0},async onGuardar(){try{this.saving=!0,this.dlg.modo==="crear"?(await this.$axios.post("/plagas",this.form),this.$q.notify({type:"positive",message:"Registro creado"})):(await this.$axios.put(`/plagas/${this.dlg.id}`,this.form),this.$q.notify({type:"positive",message:"Registro actualizado"})),this.dlg.open=!1,this.fetchRows()}catch{this.$q.notify({type:"negative",message:"Error al guardar"})}finally{this.saving=!1}},async onEliminar(t){this.$q.dialog({title:"Eliminar",message:"¿Desea eliminar este registro?",cancel:!0,persistent:!0}).onOk(async()=>{try{await this.$axios.delete(`/plagas/${t.id}`),this.$q.notify({type:"positive",message:"Eliminado"}),this.fetchRows()}catch{this.$q.notify({type:"negative",message:"No se pudo eliminar"})}})},onImprimir(){if(!this.cosecha?.id)return;const t=this.$axios.defaults.baseURL+`/plagas/${this.cosecha.id}/imprimir`;window.open(t,"_blank")}}},ro={class:"q-gutter-sm"},co={class:"row q-col-gutter-sm"},uo={class:"col-12 col-md-6"},mo={class:"row q-col-gutter-xs"},po={class:"col-6"},fo={class:"self-center full-width no-outline text-weight-medium"},_o={class:"col-6"},ho={class:"self-center full-width no-outline text-weight-medium"},go={class:"col-12"},bo={class:"self-center full-width no-outline text-weight-medium"},yo={class:"col-12"},vo={class:"self-center full-width no-outline text-weight-medium"},Co={class:"col-12 col-md-6"},xo={class:"row q-col-gutter-xs"},Ao={class:"col-12"},Vo={class:"self-center full-width no-outline text-weight-medium"},ko={class:"col-12"},wo={class:"self-center full-width no-outline text-weight-medium"},No={class:"col-12"},Eo={class:"self-center full-width no-outline text-weight-medium"},zo={class:"col-12"},Oo={class:"self-center full-width no-outline text-weight-medium"},Io={class:"text-right"},Lo={key:1},Uo={class:"text-subtitle1"},qo={class:"row q-col-gutter-md"},Ro={class:"col-12 col-md-4"},Mo={class:"col-12 col-md-6"},To={class:"col-12 col-md-6"},Po={class:"col-12"},$o={class:"col-12"};function So(t,o,m,x,i,r){return c(),p(I,{flat:"",bordered:""},{default:a(()=>[l(y,{class:"row items-center justify-between"},{default:a(()=>[o[6]||(o[6]=e("div",{class:"text-subtitle1"},"Control de Plagas",-1)),e("div",ro,[m.readOnly?z("",!0):(c(),p(f,{key:0,color:"primary",icon:"add",label:"Nuevo","no-caps":"",onClick:r.onNuevo},null,8,["onClick"])),l(f,{color:"green",icon:"print",label:"Imprimir","no-caps":"",onClick:r.onImprimir},null,8,["onClick"])])]),_:1}),l(A),r.datosEncabezado?(c(),p(y,{key:0,class:"bg-grey-2"},{default:a(()=>[o[7]||(o[7]=e("div",{class:"text-h6 text-center q-mb-md text-primary"}," Registro de Control de Plagas en Colmenas ",-1)),e("div",co,[e("div",uo,[e("div",mo,[e("div",po,[l(v,{dense:"",borderless:"",label:"REGISTRO SANITARIO:","stack-label":""},{control:a(()=>[e("div",fo,d(r.datosEncabezado.registro_sanitario||"N/A"),1)]),_:1})]),e("div",_o,[l(v,{dense:"",borderless:"",label:"DEPARTAMENTO:","stack-label":""},{control:a(()=>[e("div",ho,d(r.datosEncabezado.departamento||"N/A"),1)]),_:1})]),e("div",go,[l(v,{dense:"",borderless:"",label:"NOMBRE DEL APICULTOR O RESPONSABLE:","stack-label":""},{control:a(()=>[e("div",bo,d(r.datosEncabezado.nombre_apicultor||"N/A"),1)]),_:1})]),e("div",yo,[l(v,{dense:"",borderless:"",label:"NOMBRE DEL APIARIO:","stack-label":""},{control:a(()=>[e("div",vo,d(r.datosEncabezado.nombre_apiario||"N/A"),1)]),_:1})])])]),e("div",Co,[e("div",xo,[e("div",Ao,[l(v,{dense:"",borderless:"",label:"PROVINCIA:","stack-label":""},{control:a(()=>[e("div",Vo,d(r.datosEncabezado.provincia||"N/A"),1)]),_:1})]),e("div",ko,[l(v,{dense:"",borderless:"",label:"MUNICIPIO:","stack-label":""},{control:a(()=>[e("div",wo,d(r.datosEncabezado.municipio||"N/A"),1)]),_:1})]),e("div",No,[l(v,{dense:"",borderless:"",label:"GEOREFERENCIACIÓN:","stack-label":""},{control:a(()=>[e("div",Eo,d(r.datosEncabezado.georeferenciacion||"N/A"),1)]),_:1})]),e("div",zo,[l(v,{dense:"",borderless:"",label:"LOCALIDAD:","stack-label":""},{control:a(()=>[e("div",Oo,d(r.datosEncabezado.localidad||"N/A"),1)]),_:1})])])])])]),_:1})):z("",!0),l(A),l(y,null,{default:a(()=>[l($,{dense:"","wrap-cells":"",bordered:"",flat:""},{default:a(()=>[o[10]||(o[10]=e("thead",null,[e("tr",{class:"bg-primary text-white"},[e("th",null,"Acciones"),e("th",null,"Fecha"),e("th",null,"Nombre o Código del Apiario"),e("th",null,"Plaga Presente"),e("th",null,"Daño Visible"),e("th",null,"Método de Control")])],-1)),e("tbody",null,[(c(!0),h(U,null,q(i.rows,s=>(c(),h("tr",{key:s.id},[e("td",Io,[m.readOnly?(c(),h("span",Lo,"—")):(c(),p(P,{key:0,dense:"","no-caps":"",label:"Acciones",color:"primary",size:"10px"},{default:a(()=>[l(T,null,{default:a(()=>[g((c(),p(w,{clickable:"",onClick:n=>r.onEditar(s)},{default:a(()=>[l(_,{avatar:""},{default:a(()=>[l(k,{name:"edit"})]),_:1}),l(_,null,{default:a(()=>o[8]||(o[8]=[C("Editar")])),_:1})]),_:2},1032,["onClick"])),[[O],[b]]),g((c(),p(w,{clickable:"",onClick:n=>r.onEliminar(s)},{default:a(()=>[l(_,{avatar:""},{default:a(()=>[l(k,{name:"delete",color:"negative"})]),_:1}),l(_,null,{default:a(()=>o[9]||(o[9]=[C("Eliminar")])),_:1})]),_:2},1032,["onClick"])),[[O],[b]])]),_:2},1024)]),_:2},1024))]),e("td",null,d(s.fecha),1),e("td",null,d(s.nombre_plaga),1),e("td",null,d(s.plaga_presente),1),e("td",null,d(s.daño_visible_apiario),1),e("td",null,d(s.medidas_control_celdilla),1)]))),128))])]),_:1})]),_:1}),l(M,{modelValue:i.dlg.open,"onUpdate:modelValue":o[5]||(o[5]=s=>i.dlg.open=s),persistent:""},{default:a(()=>[l(I,{style:{"max-width":"90vw"}},{default:a(()=>[l(y,{class:"row items-center justify-between"},{default:a(()=>[e("div",Uo,d(i.dlg.modo==="crear"?"Nuevo registro":"Editar registro"),1),g(l(f,{flat:"",round:"",dense:"",icon:"close"},null,512),[[b]])]),_:1}),l(A),l(y,{class:""},{default:a(()=>[e("div",qo,[e("div",Ro,[l(u,{modelValue:i.form.fecha,"onUpdate:modelValue":o[0]||(o[0]=s=>i.form.fecha=s),type:"date",label:"Fecha",dense:"",outlined:""},null,8,["modelValue"])]),e("div",Mo,[l(u,{modelValue:i.form.plaga_presente,"onUpdate:modelValue":o[1]||(o[1]=s=>i.form.plaga_presente=s),label:"Plaga Presente en el Apiario",dense:"",outlined:""},null,8,["modelValue"])]),e("div",To,[l(u,{modelValue:i.form.daño_visible_apiario,"onUpdate:modelValue":o[2]||(o[2]=s=>i.form.daño_visible_apiario=s),label:"Daño Visible en el Apiario",dense:"",outlined:""},null,8,["modelValue"])]),e("div",Po,[l(u,{modelValue:i.form.medidas_control_celdilla,"onUpdate:modelValue":o[3]||(o[3]=s=>i.form.medidas_control_celdilla=s),label:"Método de Control Utilizado",dense:"",outlined:""},null,8,["modelValue"])]),e("div",$o,[l(u,{modelValue:i.form.observaciones,"onUpdate:modelValue":o[4]||(o[4]=s=>i.form.observaciones=s),type:"textarea",autogrow:"",label:"Observaciones",dense:"",outlined:""},null,8,["modelValue"])])])]),_:1}),l(A),l(B,{align:"right"},{default:a(()=>[g(l(f,{flat:"",label:"Cancelar"},null,512),[[b]]),l(f,{color:"primary",label:i.dlg.modo==="crear"?"Guardar":"Actualizar",onClick:r.onGuardar,loading:i.saving},null,8,["label","onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const _t=R(no,[["render",So]]),Do={name:"LimpiezasFormulario",props:{cosecha:{type:Object,required:!0},readOnly:{type:Boolean,default:!1}},data(){return{loading:!1,saving:!1,rows:[],dlg:{open:!1,modo:"crear",id:null},form:{acopio_cosecha_id:null,equipo_herramienta_material:"",material_recubrimiento:"",metodo_limpieza_utilizado:"",producto_quimico_desinfeccion:"",fecha_aplicacion:null}}},computed:{datosEncabezado(){if(!this.cosecha?.apiario?.productor)return null;const t=this.cosecha.apiario.productor,o=t.municipio||{},m=o.provincia||{},x=o.departamento||{},i=this.cosecha.apiario||{};return{registro_sanitario:t.runsa||t.codigo_runsa||"N/A",departamento:x.nombre_departamento||"N/A",nombre_responsable:`${t.nombre||""} ${t.apellidos||""}`.trim()||t.nombre_apellido||"N/A",provincia:m.nombre_provincia||"N/A",ubicacion_upa:i.lugar_apiario||"N/A",municipio:o.nombre_municipio||"N/A",telefono:t.num_celular||t.celular||"N/A",localidad:t.direccion||"N/A",comunidad:t.comunidad||"N/A"}}},mounted(){this.fetchRows()},methods:{resetForm(){const t=new Date().toISOString().split("T")[0];this.form={acopio_cosecha_id:this.cosecha?.id||null,equipo_herramienta_material:"",material_recubrimiento:"",metodo_limpieza_utilizado:"",producto_quimico_desinfeccion:"",fecha_aplicacion:t}},async fetchRows(){try{this.loading=!0;const{data:t}=await this.$axios.get("/limpiezas",{params:{cosecha_id:this.cosecha?.id}});this.rows=Array.isArray(t)?t:t?.data||[]}catch{this.$q.notify({type:"negative",message:"No se pudieron cargar los registros"})}finally{this.loading=!1}},onNuevo(){this.dlg.modo="crear",this.dlg.id=null,this.resetForm(),this.form.acopio_cosecha_id=this.cosecha?.id||null,this.dlg.open=!0},onEditar(t){this.dlg.modo="editar",this.dlg.id=t.id,this.form={...t,acopio_cosecha_id:this.cosecha?.id||t.acopio_cosecha_id},this.dlg.open=!0},async onGuardar(){try{this.saving=!0,this.dlg.modo==="crear"?(await this.$axios.post("/limpiezas",this.form),this.$q.notify({type:"positive",message:"Registro creado"})):(await this.$axios.put(`/limpiezas/${this.dlg.id}`,this.form),this.$q.notify({type:"positive",message:"Registro actualizado"})),this.dlg.open=!1,this.fetchRows()}catch{this.$q.notify({type:"negative",message:"Error al guardar"})}finally{this.saving=!1}},async onEliminar(t){this.$q.dialog({title:"Eliminar",message:"¿Desea eliminar este registro?",cancel:!0,persistent:!0}).onOk(async()=>{try{await this.$axios.delete(`/limpiezas/${t.id}`),this.$q.notify({type:"positive",message:"Eliminado"}),this.fetchRows()}catch{this.$q.notify({type:"negative",message:"No se pudo eliminar"})}})},onImprimir(){if(!this.cosecha?.id)return;const t=this.$axios.defaults.baseURL+`/limpiezas/${this.cosecha.id}/imprimir`;window.open(t,"_blank")}}},Fo={class:"q-gutter-sm"},Qo={class:"row q-col-gutter-sm"},Go={class:"col-12 col-md-6"},jo={class:"row q-col-gutter-xs"},Bo={class:"col-6"},Zo={class:"self-center full-width no-outline text-weight-medium"},Ho={class:"col-6"},Jo={class:"self-center full-width no-outline text-weight-medium"},Ko={class:"col-12"},Wo={class:"self-center full-width no-outline text-weight-medium"},Xo={class:"col-12"},Yo={class:"self-center full-width no-outline text-weight-medium"},el={class:"col-12"},ol={class:"self-center full-width no-outline text-weight-medium"},ll={class:"col-12 col-md-6"},tl={class:"row q-col-gutter-xs"},il={class:"col-12"},al={class:"self-center full-width no-outline text-weight-medium"},sl={class:"col-12"},nl={class:"self-center full-width no-outline text-weight-medium"},rl={class:"col-12"},dl={class:"self-center full-width no-outline text-weight-medium"},cl={class:"col-12"},ul={class:"self-center full-width no-outline text-weight-medium"},ml={class:"text-right"},pl={key:1},fl={class:"text-subtitle1"},_l={class:"row q-col-gutter-md"},hl={class:"col-12 col-md-6"},gl={class:"col-12 col-md-6"},bl={class:"col-12 col-md-6"},yl={class:"col-12 col-md-6"},vl={class:"col-12 col-md-6"};function Cl(t,o,m,x,i,r){return c(),p(I,{flat:"",bordered:""},{default:a(()=>[l(y,{class:"row items-center justify-between"},{default:a(()=>[o[6]||(o[6]=e("div",{class:"text-subtitle1"},"Limpieza y Desinfección",-1)),e("div",Fo,[m.readOnly?z("",!0):(c(),p(f,{key:0,color:"primary",icon:"add",label:"Nuevo","no-caps":"",onClick:r.onNuevo},null,8,["onClick"])),l(f,{color:"green",icon:"print",label:"Imprimir","no-caps":"",onClick:r.onImprimir},null,8,["onClick"])])]),_:1}),l(A),r.datosEncabezado?(c(),p(y,{key:0,class:"bg-grey-2"},{default:a(()=>[o[7]||(o[7]=e("div",{class:"text-h6 text-center q-mb-md text-primary"}," Registro de limpieza y desinfección de equipos y herramienta apícolas ",-1)),e("div",Qo,[e("div",Go,[e("div",jo,[e("div",Bo,[l(v,{dense:"",borderless:"",label:"REGISTRO SANITARIO:","stack-label":""},{control:a(()=>[e("div",Zo,d(r.datosEncabezado.registro_sanitario||"N/A"),1)]),_:1})]),e("div",Ho,[l(v,{dense:"",borderless:"",label:"DPTO.:","stack-label":""},{control:a(()=>[e("div",Jo,d(r.datosEncabezado.departamento||"N/A"),1)]),_:1})]),e("div",Ko,[l(v,{dense:"",borderless:"",label:"NOMBRE DEL RESPONSABLE:","stack-label":""},{control:a(()=>[e("div",Wo,d(r.datosEncabezado.nombre_responsable||"N/A"),1)]),_:1})]),e("div",Xo,[l(v,{dense:"",borderless:"",label:"UBICACIÓN DE LA UPA:","stack-label":""},{control:a(()=>[e("div",Yo,d(r.datosEncabezado.ubicacion_upa||"N/A"),1)]),_:1})]),e("div",el,[l(v,{dense:"",borderless:"",label:"TELÉFONO:","stack-label":""},{control:a(()=>[e("div",ol,d(r.datosEncabezado.telefono||"N/A"),1)]),_:1})])])]),e("div",ll,[e("div",tl,[e("div",il,[l(v,{dense:"",borderless:"",label:"PROVINCIA:","stack-label":""},{control:a(()=>[e("div",al,d(r.datosEncabezado.provincia||"N/A"),1)]),_:1})]),e("div",sl,[l(v,{dense:"",borderless:"",label:"MUNICIPIO:","stack-label":""},{control:a(()=>[e("div",nl,d(r.datosEncabezado.municipio||"N/A"),1)]),_:1})]),e("div",rl,[l(v,{dense:"",borderless:"",label:"LOCALIDAD:","stack-label":""},{control:a(()=>[e("div",dl,d(r.datosEncabezado.localidad||"N/A"),1)]),_:1})]),e("div",cl,[l(v,{dense:"",borderless:"",label:"COMUNIDAD:","stack-label":""},{control:a(()=>[e("div",ul,d(r.datosEncabezado.comunidad||"N/A"),1)]),_:1})])])])])]),_:1})):z("",!0),l(A),l(y,null,{default:a(()=>[l($,{dense:"","wrap-cells":"",bordered:"",flat:""},{default:a(()=>[o[10]||(o[10]=e("thead",null,[e("tr",{class:"bg-primary text-white"},[e("th",null,"Acciones"),e("th",null,"Equipo/Herramienta"),e("th",null,"Material Recubrimiento"),e("th",null,"Método Limpieza"),e("th",null,"Producto Químico"),e("th",null,"Fecha Aplicación")])],-1)),e("tbody",null,[(c(!0),h(U,null,q(i.rows,s=>(c(),h("tr",{key:s.id},[e("td",ml,[m.readOnly?(c(),h("span",pl,"—")):(c(),p(P,{key:0,dense:"","no-caps":"",label:"Acciones",color:"primary",size:"10px"},{default:a(()=>[l(T,null,{default:a(()=>[g((c(),p(w,{clickable:"",onClick:n=>r.onEditar(s)},{default:a(()=>[l(_,{avatar:""},{default:a(()=>[l(k,{name:"edit"})]),_:1}),l(_,null,{default:a(()=>o[8]||(o[8]=[C("Editar")])),_:1})]),_:2},1032,["onClick"])),[[O],[b]]),g((c(),p(w,{clickable:"",onClick:n=>r.onEliminar(s)},{default:a(()=>[l(_,{avatar:""},{default:a(()=>[l(k,{name:"delete",color:"negative"})]),_:1}),l(_,null,{default:a(()=>o[9]||(o[9]=[C("Eliminar")])),_:1})]),_:2},1032,["onClick"])),[[O],[b]])]),_:2},1024)]),_:2},1024))]),e("td",null,d(s.equipo_herramienta_material),1),e("td",null,d(s.material_recubrimiento),1),e("td",null,d(s.metodo_limpieza_utilizado),1),e("td",null,d(s.producto_quimico_desinfeccion),1),e("td",null,d(s.fecha_aplicacion),1)]))),128))])]),_:1})]),_:1}),l(M,{modelValue:i.dlg.open,"onUpdate:modelValue":o[5]||(o[5]=s=>i.dlg.open=s),persistent:""},{default:a(()=>[l(I,{style:{"max-width":"90vw"}},{default:a(()=>[l(y,{class:"row items-center justify-between"},{default:a(()=>[e("div",fl,d(i.dlg.modo==="crear"?"Nuevo registro":"Editar registro"),1),g(l(f,{flat:"",round:"",dense:"",icon:"close"},null,512),[[b]])]),_:1}),l(A),l(y,{class:""},{default:a(()=>[e("div",_l,[e("div",hl,[l(u,{modelValue:i.form.equipo_herramienta_material,"onUpdate:modelValue":o[0]||(o[0]=s=>i.form.equipo_herramienta_material=s),label:"Equipo, Herramienta o Material Apícola",dense:"",outlined:""},null,8,["modelValue"])]),e("div",gl,[l(u,{modelValue:i.form.material_recubrimiento,"onUpdate:modelValue":o[1]||(o[1]=s=>i.form.material_recubrimiento=s),label:"Material de Recubrimiento",dense:"",outlined:""},null,8,["modelValue"])]),e("div",bl,[l(u,{modelValue:i.form.metodo_limpieza_utilizado,"onUpdate:modelValue":o[2]||(o[2]=s=>i.form.metodo_limpieza_utilizado=s),label:"Método de Limpieza Utilizado",dense:"",outlined:""},null,8,["modelValue"])]),e("div",yl,[l(u,{modelValue:i.form.producto_quimico_desinfeccion,"onUpdate:modelValue":o[3]||(o[3]=s=>i.form.producto_quimico_desinfeccion=s),label:"Producto Químico o Desinfección",dense:"",outlined:""},null,8,["modelValue"])]),e("div",vl,[l(u,{modelValue:i.form.fecha_aplicacion,"onUpdate:modelValue":o[4]||(o[4]=s=>i.form.fecha_aplicacion=s),type:"date",label:"Fecha de Aplicación",dense:"",outlined:""},null,8,["modelValue"])])])]),_:1}),l(A),l(B,{align:"right"},{default:a(()=>[g(l(f,{flat:"",label:"Cancelar"},null,512),[[b]]),l(f,{color:"primary",label:i.dlg.modo==="crear"?"Guardar":"Actualizar",onClick:r.onGuardar,loading:i.saving},null,8,["label","onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const ht=R(Do,[["render",Cl]]),xl={name:"MedicamentosFormulario",props:{cosecha:{type:Object,required:!0},readOnly:{type:Boolean,default:!1}},data(){return{loading:!1,saving:!1,rows:[],dlg:{open:!1,modo:"crear",id:null},form:{acopio_cosecha_id:null,fecha:null,nombre_producto:"",principio_activo:"",dosis_recomendada:"",dosis_aplicada:"",plagas_controladas:"",periodo_espera_cosecha:"",nombre_encargado:"",firma:""}}},computed:{datosEncabezado(){if(!this.cosecha?.apiario?.productor)return null;const t=this.cosecha.apiario.productor,o=this.cosecha.apiario||{};return{nombre_apiario:o.nombre_apiario||o.codigo_apiario||"N/A",registro_sanitario:t.runsa||t.codigo_runsa||"N/A",nombre_responsable:`${t.nombre||""} ${t.apellidos||""}`.trim()||t.nombre_apellido||"N/A",ubicacion:t.direccion||"N/A",georeferenciacion:`${o.latitud||""}, ${o.longitud||""}`.trim().replace(/^,\s*|,\s*$/g,"")||"N/A",tipo_manejo:o.tipo_manejo||"N/A"}}},mounted(){this.fetchRows()},methods:{resetForm(){const t=new Date().toISOString().split("T")[0];this.form={acopio_cosecha_id:this.cosecha?.id||null,fecha:t,nombre_producto:"",principio_activo:"",dosis_recomendada:"",dosis_aplicada:"",plagas_controladas:"",periodo_espera_cosecha:"",nombre_encargado:"",firma:""}},async fetchRows(){try{this.loading=!0;const{data:t}=await this.$axios.get("/medicamentos",{params:{cosecha_id:this.cosecha?.id}});this.rows=Array.isArray(t)?t:t?.data||[]}catch{this.$q.notify({type:"negative",message:"No se pudieron cargar los registros"})}finally{this.loading=!1}},onNuevo(){this.dlg.modo="crear",this.dlg.id=null,this.resetForm(),this.form.acopio_cosecha_id=this.cosecha?.id||null,this.dlg.open=!0},onEditar(t){this.dlg.modo="editar",this.dlg.id=t.id,this.form={...t,acopio_cosecha_id:this.cosecha?.id||t.acopio_cosecha_id},this.dlg.open=!0},async onGuardar(){try{this.saving=!0,this.dlg.modo==="crear"?(await this.$axios.post("/medicamentos",this.form),this.$q.notify({type:"positive",message:"Registro creado"})):(await this.$axios.put(`/medicamentos/${this.dlg.id}`,this.form),this.$q.notify({type:"positive",message:"Registro actualizado"})),this.dlg.open=!1,this.fetchRows()}catch{this.$q.notify({type:"negative",message:"Error al guardar"})}finally{this.saving=!1}},async onEliminar(t){this.$q.dialog({title:"Eliminar",message:"¿Desea eliminar este registro?",cancel:!0,persistent:!0}).onOk(async()=>{try{await this.$axios.delete(`/medicamentos/${t.id}`),this.$q.notify({type:"positive",message:"Eliminado"}),this.fetchRows()}catch{this.$q.notify({type:"negative",message:"No se pudo eliminar"})}})},onImprimir(){if(!this.cosecha?.id)return;const t=this.$axios.defaults.baseURL+`/medicamentos/${this.cosecha.id}/imprimir`;window.open(t,"_blank")}}},Al={class:"q-gutter-sm"},Vl={class:"row q-col-gutter-sm"},kl={class:"col-12 col-md-6"},wl={class:"row q-col-gutter-xs"},Nl={class:"col-12"},El={class:"self-center full-width no-outline text-weight-medium"},zl={class:"col-12"},Ol={class:"self-center full-width no-outline text-weight-medium"},Il={class:"col-12"},Ll={class:"self-center full-width no-outline text-weight-medium"},Ul={class:"col-12 col-md-6"},ql={class:"row q-col-gutter-xs"},Rl={class:"col-12"},Ml={class:"self-center full-width no-outline text-weight-medium"},Tl={class:"col-12"},Pl={class:"self-center full-width no-outline text-weight-medium"},$l={class:"col-12"},Sl={class:"self-center full-width no-outline text-weight-medium"},Dl={class:"text-right"},Fl={key:1},Ql={class:"text-subtitle1"},Gl={class:"row q-col-gutter-md"},jl={class:"col-12 col-md-3"},Bl={class:"col-12 col-md-9"},Zl={class:"col-12 col-md-6"},Hl={class:"col-12 col-md-3"},Jl={class:"col-12 col-md-3"},Kl={class:"col-12 col-md-6"},Wl={class:"col-12 col-md-6"},Xl={class:"col-12 col-md-6"},Yl={class:"col-12 col-md-6"};function et(t,o,m,x,i,r){return c(),p(I,{flat:"",bordered:""},{default:a(()=>[l(y,{class:"row items-center justify-between"},{default:a(()=>[o[10]||(o[10]=e("div",{class:"text-subtitle1"},"Aplicación de Medicamentos",-1)),e("div",Al,[m.readOnly?z("",!0):(c(),p(f,{key:0,color:"primary",icon:"add",label:"Nuevo","no-caps":"",onClick:r.onNuevo},null,8,["onClick"])),l(f,{color:"green",icon:"print",label:"Imprimir","no-caps":"",onClick:r.onImprimir},null,8,["onClick"])])]),_:1}),l(A),r.datosEncabezado?(c(),p(y,{key:0,class:"bg-grey-2"},{default:a(()=>[o[11]||(o[11]=e("div",{class:"text-h6 text-center q-mb-md text-primary"}," Registro de Aplicación de Medicamentos ",-1)),e("div",Vl,[e("div",kl,[e("div",wl,[e("div",Nl,[l(v,{dense:"",borderless:"",label:"NOMBRE DEL APIARIO:","stack-label":""},{control:a(()=>[e("div",El,d(r.datosEncabezado.nombre_apiario||"N/A"),1)]),_:1})]),e("div",zl,[l(v,{dense:"",borderless:"",label:"NOMBRE DEL RESPONSABLE:","stack-label":""},{control:a(()=>[e("div",Ol,d(r.datosEncabezado.nombre_responsable||"N/A"),1)]),_:1})]),e("div",Il,[l(v,{dense:"",borderless:"",label:"UBICACIÓN GEOREFERENCIAL:","stack-label":""},{control:a(()=>[e("div",Ll,d(r.datosEncabezado.georeferenciacion||"N/A"),1)]),_:1})])])]),e("div",Ul,[e("div",ql,[e("div",Rl,[l(v,{dense:"",borderless:"",label:"REGISTRO SANITARIO:","stack-label":""},{control:a(()=>[e("div",Ml,d(r.datosEncabezado.registro_sanitario||"N/A"),1)]),_:1})]),e("div",Tl,[l(v,{dense:"",borderless:"",label:"UBICACIÓN:","stack-label":""},{control:a(()=>[e("div",Pl,d(r.datosEncabezado.ubicacion||"N/A"),1)]),_:1})]),e("div",$l,[l(v,{dense:"",borderless:"",label:"TIPO DE MANEJO:","stack-label":""},{control:a(()=>[e("div",Sl,d(r.datosEncabezado.tipo_manejo||"N/A"),1)]),_:1})])])])])]),_:1})):z("",!0),l(A),l(y,null,{default:a(()=>[l($,{dense:"","wrap-cells":"",bordered:"",flat:""},{default:a(()=>[o[14]||(o[14]=e("thead",null,[e("tr",{class:"bg-primary text-white"},[e("th",null,"Acciones"),e("th",null,"Fecha"),e("th",null,"Nombre Producto"),e("th",null,"Principio Activo"),e("th",null,"Dosis Recomendada"),e("th",null,"Dosis Aplicada"),e("th",null,"Plagas Controladas")])],-1)),e("tbody",null,[(c(!0),h(U,null,q(i.rows,s=>(c(),h("tr",{key:s.id},[e("td",Dl,[m.readOnly?(c(),h("span",Fl,"—")):(c(),p(P,{key:0,dense:"","no-caps":"",label:"Acciones",color:"primary",size:"10px"},{default:a(()=>[l(T,null,{default:a(()=>[g((c(),p(w,{clickable:"",onClick:n=>r.onEditar(s)},{default:a(()=>[l(_,{avatar:""},{default:a(()=>[l(k,{name:"edit"})]),_:1}),l(_,null,{default:a(()=>o[12]||(o[12]=[C("Editar")])),_:1})]),_:2},1032,["onClick"])),[[O],[b]]),g((c(),p(w,{clickable:"",onClick:n=>r.onEliminar(s)},{default:a(()=>[l(_,{avatar:""},{default:a(()=>[l(k,{name:"delete",color:"negative"})]),_:1}),l(_,null,{default:a(()=>o[13]||(o[13]=[C("Eliminar")])),_:1})]),_:2},1032,["onClick"])),[[O],[b]])]),_:2},1024)]),_:2},1024))]),e("td",null,d(s.fecha),1),e("td",null,d(s.nombre_producto),1),e("td",null,d(s.principio_activo),1),e("td",null,d(s.dosis_recomendada),1),e("td",null,d(s.dosis_aplicada),1),e("td",null,d(s.plagas_controladas),1)]))),128))])]),_:1})]),_:1}),l(M,{modelValue:i.dlg.open,"onUpdate:modelValue":o[9]||(o[9]=s=>i.dlg.open=s),persistent:""},{default:a(()=>[l(I,{style:{"max-width":"90vw"}},{default:a(()=>[l(y,{class:"row items-center justify-between"},{default:a(()=>[e("div",Ql,d(i.dlg.modo==="crear"?"Nuevo registro":"Editar registro"),1),g(l(f,{flat:"",round:"",dense:"",icon:"close"},null,512),[[b]])]),_:1}),l(A),l(y,{class:""},{default:a(()=>[e("div",Gl,[e("div",jl,[l(u,{modelValue:i.form.fecha,"onUpdate:modelValue":o[0]||(o[0]=s=>i.form.fecha=s),type:"date",label:"Fecha",dense:"",outlined:""},null,8,["modelValue"])]),e("div",Bl,[l(u,{modelValue:i.form.nombre_producto,"onUpdate:modelValue":o[1]||(o[1]=s=>i.form.nombre_producto=s),label:"Nombre del Producto",dense:"",outlined:""},null,8,["modelValue"])]),e("div",Zl,[l(u,{modelValue:i.form.principio_activo,"onUpdate:modelValue":o[2]||(o[2]=s=>i.form.principio_activo=s),label:"Principio Activo",dense:"",outlined:""},null,8,["modelValue"])]),e("div",Hl,[l(u,{modelValue:i.form.dosis_recomendada,"onUpdate:modelValue":o[3]||(o[3]=s=>i.form.dosis_recomendada=s),label:"Dosis Recomendada",dense:"",outlined:""},null,8,["modelValue"])]),e("div",Jl,[l(u,{modelValue:i.form.dosis_aplicada,"onUpdate:modelValue":o[4]||(o[4]=s=>i.form.dosis_aplicada=s),label:"Dosis Aplicada",dense:"",outlined:""},null,8,["modelValue"])]),e("div",Kl,[l(u,{modelValue:i.form.plagas_controladas,"onUpdate:modelValue":o[5]||(o[5]=s=>i.form.plagas_controladas=s),label:"Plagas Controladas",dense:"",outlined:""},null,8,["modelValue"])]),e("div",Wl,[l(u,{modelValue:i.form.periodo_espera_cosecha,"onUpdate:modelValue":o[6]||(o[6]=s=>i.form.periodo_espera_cosecha=s),label:"Periodo de Espera para Cosecha",dense:"",outlined:""},null,8,["modelValue"])]),e("div",Xl,[l(u,{modelValue:i.form.nombre_encargado,"onUpdate:modelValue":o[7]||(o[7]=s=>i.form.nombre_encargado=s),label:"Nombre del Encargado",dense:"",outlined:""},null,8,["modelValue"])]),e("div",Yl,[l(u,{modelValue:i.form.firma,"onUpdate:modelValue":o[8]||(o[8]=s=>i.form.firma=s),label:"Firma",dense:"",outlined:"",hint:"Texto o ruta de imagen"},null,8,["modelValue"])])])]),_:1}),l(A),l(B,{align:"right"},{default:a(()=>[g(l(f,{flat:"",label:"Cancelar"},null,512),[[b]]),l(f,{color:"primary",label:i.dlg.modo==="crear"?"Guardar":"Actualizar",onClick:r.onGuardar,loading:i.saving},null,8,["label","onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const gt=R(xl,[["render",et]]);export{ht as L,gt as M,_t as P,mt as a,pt as b,ft as c};
